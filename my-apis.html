<!DOCTYPE html>
<html class="vs-my-apis" lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:include="webroot/frags/layout/head.htm :: header">
<script src="/dist/js/lib/jquery.min.js"></script>
<script src="/dist/js/lib/thymus.min.js" id="thymus"
	data-thx-base-path="." data-thx-frag-extension=".htm"
	data-thx-head-frag="th:include=webroot/frags/layout/head.htm :: header"
	data-thx-preload-js="/dist/js/loader.js"
	data-thx-onfrags="fragsListener();" data-thx-onfrag="fragListener()"></script>
<link href="/dist/css/obsidian.css" rel="stylesheet">
<link href="/dist/css/jsoneditor.min.css" rel="stylesheet" type="text/css">
<link href="/dist/js/swagger/swagger-editor.css" rel="stylesheet">
</head>
<body>
<div id="portal" class="wrapper" v-bind:class="pageClass">
	<div th:replace="webroot/frags/layout/navs.htm :: navs"></div>
	<main class="page-wrapper">
	<my-apis inline-template ref="refMyApis" v-on:set-page="setPage" v-bind:root-state="rootState">
		<div class="columns tab-content">
			<aside class="column column-aside list-column">
				<div class="clearfix column-header column-min-button">
					<div class="dropdown column-header-button">
						<button type="button" class="dropdown-toggle btn btn-lg btn-link txt-link btn-square" data-toggle="dropdown" aria-expanded="false"><i class="fas fa-ellipsis-h"></i></button>
						<ul class="dropdown-menu dropdown-menu-right" role="menu">
							<li><a href="#" v-on:click="sortList(sortApi, 'info.title', String)"><i class="fas fa-sort"></i>Sort by Name</a></li>
							<li><a href="#" v-on:click="sortList(sortApi, 'x-abyss-platform.created', Date);"><i class="fas fa-calendar-alt"></i>Sort by Date</a></li>
							<li><a href="#" v-on:click="sortList(sortApi, 'x-abyss-platform.proxies_summary', Array)"><i class="fas fa-code-branch"></i>Sort by Proxies</a></li>
						</ul>
					</div>
					<h5 class="column-header-title">My APIs <small>All</small></h5>
				</div>
				<div class="column-content">
					<div class="nicescroll-bar">
						<v-select label="info.title" :filterable="false" :options="apiOptions" @search="getApiOptions" :on-change="filterApi" placeholder="Search API">
							<span slot="no-options"></span>
							<template slot="option" slot-scope="option">
								<div>{{ option.info.title }}</div>
							</template>
							<template slot="selected-option" slot-scope="option">
								<div>{{ option.info.title }}</div>
							</template>
						</v-select>
						<ul class="nav flex-column nav-controls nav-controls-first">
							<li v-for="(api, index) in sortByNested(sortApi, myApiList)" v-bind:key="api['x-abyss-platform'].uuid">
								<div class="nav-actions dropdown dropdown-hover">
									<button type="button"><i class="fas fa-ellipsis-h"></i></button>
									<ul class="dropdown-menu dropdown-menu-right" role="menu" data-dropdown-in="slideInRight" data-dropdown-out="slideOutRight">
										<li><a href="#" v-on:click="selectApi(api, 'edit')"><i class="fas fa-edit"></i>Edit</a></li>
										<li><a href="#"><i class="fas fa-code-branch"></i>Create Proxy</a></li>
										<li><a href="#" v-on:click="selectApi(api, 'preview')"><i class="fas fa-file-alt"></i>Preview</a></li>
										<li class="dropdown-header">VISIBILITY</li>
										<li role="separator" class="divider"></li>
										<li v-bind:class="{'active': api['x-abyss-platform'].apivisibilityid == 1}" ><a href="#" v-on:click="apiChangeVisibility(api, 1)"><i class="fas fa-eye"></i>Public</a></li>
										<li v-bind:class="{'active': api['x-abyss-platform'].apivisibilityid == 2}" ><a href="#" v-on:click="apiChangeVisibility(api, 2)"><i class="fas fa-user-secret"></i>Private</a></li>
										<li v-bind:class="{'active': api['x-abyss-platform'].apivisibilityid == 3}" ><a href="#" v-on:click="apiChangeVisibility(api, 3)"><i class="fas fa-user"></i>Only registered users</a></li>
										<li class="dropdown-header">CHANGE STATE</li>
										<li role="separator" class="divider"></li>
										<li v-bind:class="{'active': api['x-abyss-platform'].apistateid == 2}"><a href="#" v-on:click="apiChangeState(api, 2)"><i class="fas fa-circle stat-2"></i>Draft</a></li>
										<li v-bind:class="{'active': api['x-abyss-platform'].apistateid == 3}"><a href="#" v-on:click="apiChangeState(api, 3)"><i class="fas fa-circle stat-3"></i>Stage</a></li>
										<li v-bind:class="{'active': api['x-abyss-platform'].apistateid == 4}"><a href="#" v-on:click="apiChangeState(api, 4)"><i class="fas fa-circle stat-4"></i>Publish</a></li>
										<li v-bind:class="{'active': api['x-abyss-platform'].apistateid == 5}"><a href="#" v-on:click="apiChangeState(api, 5)"><i class="fas fa-circle stat-5"></i>Promote</a></li>
										<li v-bind:class="{'active': api['x-abyss-platform'].apistateid == 6}"><a href="#" v-on:click="apiChangeState(api, 6)"><i class="fas fa-circle stat-6"></i>Demote</a></li>
										<li v-bind:class="{'active': api['x-abyss-platform'].apistateid == 8}"><a href="#" v-on:click="apiChangeState(api, 8)"><i class="fas fa-circle stat-8"></i>Retire</a></li>
										<li v-bind:class="{'active': api['x-abyss-platform'].apistateid == 10}"><a href="#" v-on:click="apiChangeState(api, 10)"><i class="fas fa-trash-alt"></i>Delete</a></li> </ul>
								</div>
								<a href="#" data-toggle="collapse" v-bind:data-target="'#api'+api['x-abyss-platform'].uuid" v-bind:aria-controls="'api'+api['x-abyss-platform'].uuid" v-bind:class="{'active': isSelectedApi(api['x-abyss-platform'].uuid)}">
									<div class="">
										<i v-bind:title="apiGetStateName(api['x-abyss-platform'].apistateid)" class="fas fa-circle" v-bind:class="'stat-' + api['x-abyss-platform'].apistateid"></i>
										<strong>{{api.info.title}}</strong> <small class="text-muted">{{api.info.version}}</small>
									</div>
									<small>Proxies: <strong>{{api['x-abyss-platform'].proxies_summary.length}}</strong></small>
									<small class="text-muted float-right">{{api['x-abyss-platform'].created | formatDate}}</small>
								</a>
								<ul v-bind:id="'api'+api['x-abyss-platform'].uuid" class="collapse clearfix">
									<li>
										<div class="px-3 txt-dark border-top">
											<div class="small pt-2">
												<p>
													<strong class="d-block text-uppercase">Servers</strong> 
													<span class="d-block text-truncate" v-for="(sv, index) in api.servers" v-bind:title="sv.url">{{sv.url}}</span>
												</p>
												<div class="fow form-row">
													<p class="fol-6"><strong class="d-block text-uppercase">Visibility</strong><span class="text-capitalize">{{apiGetVisibilityName(api['x-abyss-platform'].apivisibilityid)}}</span></p>
													<p class="fol-6"><strong class="d-block text-uppercase">State</strong><span class="text-capitalize">{{apiGetStateName(api['x-abyss-platform'].apistateid)}}</span></p>
												</div>
												<div class="fow form-row">
													<p class="fol-6"><strong class="d-block text-uppercase">Security</strong> {{getObjCount(openapi.components.securitySchemes)}}</p>
													<p class="fol-6"><strong class="d-block text-uppercase">Licence</strong> {{api.info.licence}}</p>
												</div>
												<div class="fow form-row">
													<p class="fol-12"><strong class="d-block text-uppercase">Categories</strong>{{compCategoriesToList}}</p>
													<p class="fol-12"><strong class="d-block text-uppercase">Groups</strong>{{compGroupsToList}}</p>
													<p class="fol-12"><strong class="d-block text-uppercase">Tags</strong>{{compTagsToList}}</p>
													<p class="fol-12"><small class="d-block">{{api.info.description}}</small></p>
												</div>
											</div>
											<ul class="row nav flex-column nav-controls mt-2" v-if="api['x-abyss-platform'].proxies_summary.length">
												<li class="field-link small">
													<strong class="d-block text-uppercase">PROXIES</strong>
												</li>
												<li class="field-link" v-for="(proxy, index) in api['x-abyss-platform'].proxies_summary">
													<div class="nav-actions dropdown dropdown-hover">
														<button type="button" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fas fa-ellipsis-h"></i></button>
														<ul class="dropdown-menu dropdown-menu-right" role="menu" data-dropdown-in="slideInRight" data-dropdown-out="slideOutRight">
															<li><a href="#" v-on:click="$root.setState('edit')"><i class="fas fa-edit"></i>Edit</a></li>
															<li><a href="#"><i class="fas fa-trash-alt"></i>Delete</a></li>
															<li><a href="#"><i class="fas fa-file-alt"></i>Preview</a></li>
														</ul>
													</div>
													{{proxy.name}}
												</li>
											</ul>
										</div>
									</li>
								</ul>
							</li>
						</ul>
					</div>
				</div>
			</aside>

			<aside class="column column-aside create-column">
				<div class="clearfix border-bottom column-header column-min-button">
					<h5 class="column-header-title">Information</h5>
				</div>
				<div class="column-content">
					<form class="nicescroll-bar" id="frmHeader">
						<article class="field-controls field-level-0" data-id="Info">
							<a href="#" class="field-link nav-caret" data-toggle="collapse" data-target="#upload" aria-controls="upload" aria-expanded="true">
								<h6><i class="fa fa-fw fa-upload"></i> Upload API <small>{{api['x-abyss-platform'].specs}}</small></h6>
							</a>
							<div id="upload" class="collapse in field-color-grey field-level-1">
								<div id="specsFrom" class="field-acc" v-show="rootState == 'create' && api['x-abyss-platform'].specs != 'scratch'">
									<div class="form-group">
										<span class="radio radio-primary d-inline-block mr-3">
											<input type="radio" name="specsUpload" id="specsUrl" class="js-switchclass" data-all=".specs-uploads" data-target="#specsFromUrl" data-class="show" checked>
											<label for="specsUrl">From URL</label>
										</span>
										<span class="radio radio-primary d-inline-block">
											<input type="radio" name="specsUpload" id="specsFile" class="js-switchclass" data-all=".specs-uploads" data-target="#specsFromFile" data-class="show">
											<label for="specsFile">From File</label>
										</span>
									</div>
									<div id="specsFromUrl" class="specs-uploads hide show">
										<div class="form-group">
											<label for="specsFileUrl">URL:</label>
											<input type="text" name="specsFileUrl" id="specsFileUrl" class="form-control" v-on:change="loadFromUrlSchema($event.target.value)">
										</div>
									</div>
									<div id="specsFromFile" class="specs-uploads hide dz-single">
										<div class="form-group">
											<vue-dropzone ref="dropSpecs" id="dropSpecs" :options="dropSpecsOptions" v-on:vdropzone-success="dropSpecsSuccess" v-on:vdropzone-removed-file="dropSpecsRemoved"></vue-dropzone>
										</div>
									</div>
								</div>
							</div>
						</article>
						<article class="field-controls field-level-0" data-id="Servers">
							<div class="field-sum">
								<a href="#" class="field-link nav-caret" data-toggle="collapse" data-target="#servers" aria-controls="servers" aria-expanded="true">
									<h6><i class="fa fa-fw fa-server"></i> Servers</h6>
								</a>
								<span class="ficon-act ficon-act-abs">
									<a href="#" title="Add a server" v-on:click="addServer()"><i class="fas fa-lg fa-plus"></i></a>
								</span>
							</div>
							<div id="servers" class="collapse in">
								<div v-for="(server,sindex) in openapi.servers" class="field-controls field-color-grey field-level-1">
									<span class="ficon-act ficon-act-abs">
										<a class="" data-toggle="" title="Remove server" v-on:click="removeServer(sindex)" v-if="sindex > 0"><i class="fa fa-trash-alt"></i></a>
										<a href="#" data-toggle="" title="Show Variables" data-toggle="collapse" v-bind:data-target="'#server'+sindex" v-bind:aria-controls="'server'+sindex" v-if="server.variables" v-bind:class="{'txt-green': server.variables}"><i class="">V</i></a>
										<a href="#" data-toggle="" title="Add Variable" v-on:click="addVariable(sindex)" v-if="!server.variables"><i class="">V</i></a>
										<a data-toggle="" title="Add a server" v-on:click="addServer()"><i class="fa fa-plus"></i></a>
									</span>
									<a href="#" class="field-link nav-caret" data-toggle="collapse" v-bind:data-target="'#server'+sindex" v-bind:aria-controls="'server'+sindex">
										<span>{{server.url}}</span>
									</a>
									<div v-bind:id="'server'+sindex" class="collapse field-acc">
										<div class="form-group" v-bind:class="{'has-error': errors.has('server'+sindex) }">
											<label>URL</label>
											<input class="form-control" placeholder="Required" v-model="server.url" :name="'server'+sindex" v-validate="'required'">
										</div>
										<div class="form-group">
											<label>Description</label>
											<input class="form-control" v-model="server.description">
										</div>
										<api-srvvar v-for="(variable,index) in server.variables" :name="index" :key="index" :variable="variable" :server="server" :sindex="sindex" inline-template>
											<div class="position-relative pt-3">
												<span class="ficon-act ficon-act-abs">
													<a data-toggle="" title="Remove variable" v-on:click="removeVariable(sindex)">Remove Variable <i class="fa fa-trash-alt"></i></a>
												</span>
												<div class="form-group">
													<label>Name</label>
													<input class="form-control" v-model.lazy="variableName">
												</div>
												<div class="form-group">
													<label>Description</label>
													<input class="form-control" v-model="variable.description">
												</div>
												<div class="form-group mb-0">
													<label>Default</label>
													<input class="form-control" placeholder="Required" v-model="variable.default">
												</div>
												<div class="ficon-act justify-content-end">
													<a v-on:click="addVEnum()">Add Enum Value <i class="fa fa-fw fa-plus"></i></a>
												</div>
												<api-venum v-for="(evalue,eindex) in variable.enum" :variable="variable" :eindex="eindex" :key="eindex" inline-template>
													<div class="position-relative">
														<span class="ficon-act ficon-act-abs">
															<a data-toggle="" title="Add Enum value" v-on:click="addVEnum(variable)"><i class="fa fa-plus"></i></a>
															<a data-toggle="" title="Remove Enum value" v-on:click="removeVEnum(eindex)"><i class="fa fa-trash-alt"></i></a>
														</span>
														<div class="form-group">
															<label>Value</label>
															<input class="form-control" v-model="vename">
														</div>
													</div>
												</api-venum>
											</div>
										</api-srvvar>
									</div>
								</div>
							</div>
						</article>
						<article class="field-controls field-level-0" data-id="Info">
							<a href="#" class="field-link nav-caret" data-toggle="collapse" data-target="#info" aria-controls="info" aria-expanded="true">
								<h6><i class="fa fa-fw fa-info"></i> Info</h6>
							</a>
							<div id="info" class="collapse in field-controls field-color-grey field-level-1">
								<div class="field-acc border-bottom-0">
									<div class="form-group" v-bind:class="{'has-error': errors.has('infoTitle') }">
										<label>Title</label>
										<input class="form-control" placeholder="Required" v-model="openapi.info.title" v-validate="'required'" name="infoTitle">
									</div>
									<div class="form-group" v-bind:class="{'has-error': errors.has('infoVersion') }">
										<label>Version</label>
										<input class="form-control" placeholder="Required" v-model="openapi.info.version" v-validate="'required'" name="infoVersion">
									</div>
									<div class="form-group mb-0">
										<label>Description</label>
										<a class="float-right" title="Preview markdown" v-on:click="markdownPreview('#txtDescription')"><i class="fa fa-check-circle"></i></a>
										<textarea class="form-control" id="txtDescription" v-model="openapi.info.description"></textarea>
									</div>
								</div>
							</div>
						</article>
						<article class="field-controls field-level-0">
							<a href="#" class="field-link nav-caret" data-toggle="collapse" data-target="#infoContact" aria-controls="infoContact">
								<h6 class="d-block"><i class="fa fa-fw fa-address-card"></i> Contact</h6>
							</a>
							<div id="infoContact" class="collapse field-acc field-controls field-color-grey field-level-1">
								<div class="form-group">
									<label>Contact Name</label>
									<input class="form-control" v-model="openapi.info.contact.name">
								</div>
								<div class="form-group">
									<label>Contact Email</label>
									<input class="form-control" type="email" v-model="openapi.info.contact.email">
								</div>
								<div class="form-group">
									<label>Contact URL</label>
									<input type="url" class="form-control" v-model="openapi.info.contact.url">
								</div>
							</div>
						</article>
						<article class="field-controls field-level-0">
							<a href="#" class="field-link nav-caret" data-toggle="collapse" data-target="#infoTermsLicence" aria-controls="infoTermsLicence">
								<h6 class="d-block"><i class="fa fa-fw fa-check-circle"></i> Terms & Licence</h6>
							</a>
							<div id="infoTermsLicence" class="collapse field-acc field-controls field-color-grey field-level-1">
								<div class="form-group">
									<label>Terms of Service URL</label>
									<input type="url" class="form-control" v-model="openapi.info.termsOfService">
								</div>
								<div class="form-group">
									<label>License Name </label>
									<v-select label="name" taggable :filterable="false" :options="licenseOptions" v-model="openapi.info.license.name" :on-change="licenseToList">
										<span slot="no-options"></span>
									</v-select>
									<!-- <input type="text" id="nameLicense" class="form-control" v-model="openapi.info.license.name"> -->
									<!-- <input class="form-control" id="txtLicense" v-model="openapi.info.license.name">
									<div class="select hide" id="drpLicense">
										<select class="form-control" id="selLicense" v-model="openapi.info.license.name">
											<option value="MIT">MIT License</option>
											<option value="Apache-2.0">Apache 2.0 License</option>
											<option value="CC BY-SA 4.0">Creative Commons Attribution Share-alike</option>
											<option value="CC NC-SA 4.0">Creative Commons No-Commercial Share-alike</option>
											<option value="">Custom license</option>
										</select>
									</div>
									<span data-toggle="" title="Choose license"><a v-on:click="enableLicenseSelect()"><i class="fa fa-caret-down"></i></a></span> -->
								</div>
								<div class="form-group">
									<label>License URL</label>
									<input type="url" id="urlLicense" class="form-control" v-model="openapi.info.license.url">
								</div>
							</div>
						</article>
						<article class="field-controls field-level-0" data-id="Documentation">
							<a href="#" class="field-link nav-caret" data-toggle="collapse" data-target="#infoDocumentation" aria-controls="infoDocumentation">
								<h6 class="d-block"><i class="fa fa-fw fa-file-alt"></i> Documentation</h6>
							</a>
							<div id="infoDocumentation" class="collapse field-acc field-controls field-color-grey field-level-1">
								<div class="form-group">
									<label>External Docs</label>
									<span data-toggle="" title="Preview markdown"><a v-on:click="markdownPreview('#txtExtDocDesc')"><i class="fa fa-check-circle"></i></a></span>
									<textarea class="form-control" id="txtExtDocDesc" v-model="openapi.externalDocs.description"></textarea>
								</div>
								<div class="form-group">
									<label>Documentation URL</label>
									<input type="url" class="form-control" v-model="openapi.externalDocs.url">
								</div>
							</div>
						</article>
						<article class="field-controls field-level-0" data-id="Advanced">
							<a href="#" class="field-link nav-caret" data-toggle="collapse" data-target="#customizations" aria-controls="customizations">
								<h6 class="d-block"><i class="icon-verapi txt-primary"></i> Portal Specific</h6>
							</a>
							<div id="customizations" class="collapse field-acc field-controls field-color-grey field-level-1">
								<div class="form-group dz-single">
									<label for="group">Add Picture:</label>
									<vue-dropzone ref="dropImage" id="dropImage" :options="dropImageOptions" v-on:vdropzone-success="dropImageSuccess"></vue-dropzone>
								</div>
								<div class="form-group v-select-color-green v-select-inline">
									<label for="categories">Add to Categories:</label>
									<v-select label="name" multiple :filterable="true" :options="categoryOptions" @search="getCategoryOptions" v-model="api['x-abyss-platform'].categories"></v-select>
								</div>
								<div class="form-group v-select-color-purple v-select-inline">
									<label for="tags">Add Tags:</label>
									<v-select label="name" multiple taggable :filterable="false" :options="tagOptions" @search="getTagOptions" v-model="api['x-abyss-platform'].tags"></v-select>
								</div>
								<div class="form-group v-select-color-pink v-select-inline">
									<label for="group">Add Group:</label>
									<v-select label="name" multiple :filterable="false" :options="$root.rootData.myApiGroupList"  v-model="api['x-abyss-platform'].groups" ref="refApiGroups"></v-select>
								</div>
							</div>
						</article>
					</form>
				</div>
			</aside>

			<aside class="column column-aside edit-column column-minimize">
				<div class="clearfix column-header column-min-button">
					<h5 class="column-header-title">Tags & Components</h5>
				</div>
				<div class="column-content">
					<form class="nicescroll-bar" id="frmSchemas">

						<article class="field-controls field-level-0" data-id="Tags">
							<div class="field-sum">
								<a href="#" class="field-link nav-caret" data-toggle="collapse" data-target="#tags" aria-controls="tags">
									<h6 class="d-block"><i class="fa fa-fw fa-tags"></i> Tags</h6>
								</a>
								<span class="ficon-act ficon-act-abs">
									<a href="#" title="Add Tag" v-on:click="addTag()"><i class="fas fa-lg fa-plus"></i></a>
								</span>
							</div>
							<div id="tags" class="collapse">
								<div v-for="(t,index) in openapi.tags" class="field-controls field-controls field-color-grey field-level-1">
									<div class="field-sum">
										<a href="#" class="field-link" data-toggle="collapse" v-bind:data-target="'#t'+index" v-bind:aria-controls="'t'+index">
											<strong class="font-weight-black">{{t.name}}</strong>
										</a>
										<span class="ficon-act ficon-act-abs">
											<a data-toggle="" title="Remove tag" v-on:click="removeTag(index)"><i class="fa fa-trash-alt"></i></a>
										</span>
									</div>
									<div v-bind:id="'t'+index" class="collapse field-acc">
										<div class="form-group">
											<label>Name</label>
											<input class="form-control" placeholder="Required" v-model="t.name">
										</div>
										<div class="form-group">
											<label>Description</label>
											<textarea class="form-control" v-model="t.description"></textarea>
										</div>
										<div class="form-group">
											<label>External Docs</label>
											<textarea class="form-control" v-model="t.externalDocs.description"></textarea>
										</div>
										<div class="form-group">
											<label>Docs URL</label>
											<input type="url" class="form-control" v-model="t.externalDocs.url">
										</div>
									</div>
								</div>
							</div>
						</article>
						<article class="field-controls field-level-0" data-id="securitySchemes">
							<div class="field-sum">
								<a href="#" class="field-link nav-caret" data-toggle="collapse" data-target="#securitySchemes" aria-controls="securitySchemes">
									<h6 class="d-block"><i class="fa fa-fw fa-lock"></i> Security Schemes</h6>
								</a>
								<span class="ficon-act ficon-act-abs">
									<a href="#" title="Add Security Scheme" v-on:click="addSecurityDefinition()"><i class="fas fa-lg fa-plus"></i></a>
								</span>
							</div>
							<div id="securitySchemes" class="collapse">
								<api-secdef v-for="(sd, sdname, index) in openapi.components.securitySchemes" :key="sdname" :sd="sd" :sdname="sdname" :openapi="openapi" :index="index" inline-template>
									<div class="field-controls field-color-grey field-level-1">
										<div class="field-sum">
											<a href="#" class="field-link" data-toggle="collapse" v-bind:data-target="'#sd'+index" v-bind:aria-controls="'sd'+index">
												<strong class="font-weight-black">{{sdname}}</strong>
												<ul class="mb-0">
													<li v-for="(flow,flowName) in sd.flows">{{flowName}}
														<ul class="mb-0">
															<li v-for="(sdesc, sname) in flow.scopes">{{sname}}</li>
														</ul>
													</li>
												</ul>
											</a>
											<span class="ficon-act ficon-act-abs">
												<a data-toggle="" title="Remove securityScheme" v-on:click="removeSecurityDefinition(sdname)"><i class="fa fa-trash-alt"></i></a>
												<a data-toggle="" title="Add securityScheme" v-on:click="addSecurityDefinition()"><i class="fa fa-plus"></i></a>
											</span>
										</div>
										<div v-bind:id="'sd'+index" class="collapse field-acc">
											<div class="form-group">
												<label>Name</label>
												<input class="form-control" v-model.lazy="secname">
											</div>
											<div class="fow form-row">
												<div class="fol-8 form-group">
													<label for="selSdType">Type</label>
													<select class="form-control" name="selSdType" v-model="type">
														<option value="apiKey">API Key</option>
														<option value="oauth2">oAuth2</option>
														<option value="http">HTTP Authentication</option>
														<option value="openIdConnect">OpenIdConnect</option>
													</select>
												</div>
												<div class="fol-4 form-group text-right">
													<label class="d-block txt-line mb-0">Apply to all paths</label>
													<span class="switch switch-primary ml-auto">
														<input type="checkbox" :id="'applyAllPaths'+index" :value="sdname" v-model="appliesToAllPaths">
														<label :for="'applyAllPaths'+index"></label>
													</span>
												</div>
											</div>
											<div class="form-group" v-if="sd.type == 'http'">
												<label>Scheme</label>
												<input class="form-control" placeholder="Required" v-model="sd.scheme">
											</div>
											<div class="form-group" v-if="sd.type == 'openIdConnect'">
												<label>OpenIdConnect URL</label>
												<input class="form-control" placeholder="Required" v-model="sd.openIdConnectUrl">
											</div>
											<div v-if="sd.type == 'apiKey'">
												<div class="form-group">
													<label>Parameter Name</label>
													<input class="form-control" v-model="sd.name">
												</div>
												<div class="form-group">
													<label>Location</label>
													<select class="form-control" name="selLocation" v-model="sd.in">
														<option value="header">Header</option>
														<option value="query">Query</option>
														<option value="cookie">Cookie</option>
													</select>
												</div>
											</div>
											<div v-if="sd.type == 'oauth2'">
												<div class="fow form-row">
													<div class="form-group fol-6 mb-0">
														<label class="d-block">Implicit</label>
														<span class="switch switch-primary ml-auto">
															<input type="checkbox" :id="'Implicit'+index" v-model="hasImplicit">
															<label :for="'Implicit'+index"></label>
														</span>
													</div>
													<div class="form-group fol-6 mb-0">
														<label class="d-block">Password</label>
														<span class="switch switch-primary ml-auto">
															<input type="checkbox" :id="'Password'+index" v-model="hasPassword">
															<label :for="'Password'+index"></label>
														</span>
													</div>
													<div class="form-group fol-6">
														<label class="d-block">clientCredentials</label>
														<span class="switch switch-primary ml-auto">
															<input type="checkbox" :id="'clientCredentials'+index" v-model="hasClientCred">
															<label :for="'clientCredentials'+index"></label>
														</span>
													</div>
													<div class="form-group fol-6">
														<label class="d-block">authorizationCode</label>
														<span class="switch switch-primary ml-auto">
															<input type="checkbox" :id="'authorizationCode'+index" v-model="hasAuthCode">
															<label :for="'authorizationCode'+index"></label>
														</span>
													</div>
												</div>
												<div class="box" v-for="(flow,flowName) in sd.flows">
													<div class="form-group">
														<label>Authorization URL</label>
														<input type="url" class="form-control" v-model="flow.authorizationUrl">
													</div>
													<div class="form-group">
														<label>Token URL</label>
														<input type="url" class="form-control" v-model="flow.tokenUrl">
													</div>
													<div class="form-group">
														<label>Refresh URL</label>
														<input type="url" class="form-control" v-model="flow.refreshUrl">
													</div>
													<div v-if="Object.keys(flow.scopes).length==0" class="ficon-act form-group justify-content-end">
														<a v-on:click="addScope(flow)">Create Scope <i class="fa fa-fw fa-plus"></i></a>
													</div>						
													<api-scope v-for="(sdesc, sname) in flow.scopes" :sd="sd" :sdname="sdname" :sname="sname" :key="sname" :flow="flow" inline-template>
														<div class="position-relative pt-3">
															<span class="ficon-act ficon-act-abs">
																<a data-toggle="" title="Add scope" v-on:click="addScope(flow)"><i class="fa fa-plus"></i></a>
																<a data-toggle="" title="Duplicate scope" v-on:click="duplicateScope(flow)"><i class="fa fa-copy"></i></a>
																<a data-toggle="" title="Remove scope" v-on:click="removeScope(flow,sname)"><i class="fa fa-trash-alt"></i></a>
															</span>
															<div class="form-group">
																<label>Scope Name</label>
																<input class="form-control" v-model.lazy="scopename">
															</div>
															<div class="form-group">
																<label>Description</label>
																<input class="form-control" v-model="flow.scopes[sname]">
															</div>
														</div>
													</api-scope>
												</div>
											</div>
										</div>
									</div>
								</api-secdef>
							</div>
						</article>
						<article class="field-controls field-level-0" data-id="Schemas">
							<div class="field-sum">
								<a href="#" class="field-link nav-caret" data-toggle="collapse" data-target="#schemas" aria-controls="schemas">
									<h6 class="d-block"><i class="fa fa-fw fa-sitemap"></i> Schemas</h6>
								</a>
								<span class="ficon-act ficon-act-abs">
									<a href="#" title="Create Schema" v-on:click="addSchema()"><i class="fas fa-lg fa-plus"></i></a>
								</span>
							</div>
							<div id="schemas" class="collapse">
								<div v-for="(schema,key,index) in openapi.components.schemas" class="field-controls field-color-grey field-level-1">
									<div class="field-sum">
										<a href="#" class="field-link" data-toggle="collapse" v-bind:data-target="'#schema'+index" v-bind:aria-controls="'schema'+index">
											<strong class="font-weight-black">{{key}}
											<small v-for="(prop,pkey) in schema.properties" v-if="(prop.type == 'object') || prop.$ref">
												$ref: {{pkey}}
											</small>
											</strong>
										</a>
										<div class="ficon-actions dropdown dropdown-hover">
											<button type="button" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fas fa-ellipsis-h"></i></button>
											<ul class="dropdown-menu dropdown-menu-right" role="menu">
												<li><a v-on:click="editSchema(key)"><i class="fa fa-fw fa-edit"></i> Edit shared schema</a></li>
												<li><a v-on:click="duplicateSchema(key)"><i class="fa fa-fw fa-copy"></i> Duplicate schema</a></li>
												<li><a v-on:click="removeSchema(key)"><i class="fa fa-fw fa-trash-alt"></i> Remove schema</a></li>
											</ul>
										</div>
									</div>
									<div v-bind:id="'schema'+index" class="collapse field-acc">
										<div class="form-group">
											<input class="form-control" placeholder="Required" v-on:focus="storeSchemaName(key)" v-on:change="renameSchema(key)" v-model.lazy="key">
										</div>
									</div>
								</div>
							</div>
						</article>
					</form>
				</div>
			</aside>

			<aside class="column column-aside edit-column column-minimize">
				<div class="clearfix column-header column-min-button">
					<a href="#" class="btn btn-lg btn-link txt-link btn-square column-header-button" title="Create Path" v-on:click="addResource();"><i class="fas fa-lg fa-plus"></i></a>
					<h5 class="column-header-title">Paths</h5>
				</div>
				<div class="column-content">
					<form class="nicescroll-bar" id="config">
						<api-resource :openapi="openapi" :path="path" :index="key" :iii="iii" :maintags="openapi.tags" v-for="(path,key,iii) in sortByKeys(openapi.paths)" :key="key" class="field-controls" inline-template>
							<article :id="sanitisePath()" class="field-controls field-level-0">
								<div class="field-sum">
									<a href="#" class="field-link" data-toggle="collapse" v-bind:data-target="'#path'+iii" v-bind:aria-controls="'path'+iii">
										<small>Path</small>
										<h6>{{index}}</h6>
									</a>
									<div class="ficon-actions dropdown dropdown-hover">
										<button type="button" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fas fa-ellipsis-h"></i></button>
										<ul class="dropdown-menu dropdown-menu-right" role="menu">
											<li><a v-on:click="duplicateResource(index)"><i class="fa fa-copy"></i> Duplicate path</a></li>
											<li><a v-on:click="removePath(index)"><i class="is-danger fa fa-trash-alt"></i> Remove path</a></li>
										</ul>
									</div>
								</div>
								<div v-bind:id="'path'+iii" class="collapse field-acc p-0">
									<div class="px-3">
										<div class="form-group">
											<label>Path:</label>
											<input class="form-control" v-model.lazy="pathEntry">
										</div>
										<div class="form-group">
											<label>Summary</label>
											<input class="form-control" v-model="path.summary">
										</div>
										<div class="form-group">
											<label>Description</label>
											<textarea class="form-control" v-model="path.description"></textarea>
										</div>
										<div class="form-group">
											<label>Operations</label>
										</div>
									</div>
								</div>
									<div v-if="Object.keys(httpMethods).length==0" class="ficon-act justify-content-end">
										<a v-on:click="addOperation()">Add Operation <i class="fa fa-fw fa-plus"></i></a>
									</div>
									<api-method :openapi="openapi" :method="method" :index="key" :maintags="maintags" :maintags="maintags" v-for="(method,key,oindex) in httpMethods" :path="index" :key="oindex"></api-method>
							</article>
						</api-resource>
					</form>
				</div>
			</aside>

			<section class="column column-main">
				<div class="choose-spec text-center init-item">
					<h4>Register New API</h4>
					<div class="fow bg-white mb-3">
						<div class="fol-6 choose">
							<input type="radio" name="specs" id="scratch" v-on:click="chooseSpec" v-model="api['x-abyss-platform'].specs" value="scratch">
							<label for="scratch"><span><i class="fas fa-code"></i></span>From Scratch</label>
						</div>
						<div class="fol-6 choose">
							<input type="radio" name="specs" id="swagger" v-on:click="chooseSpec" v-model="api['x-abyss-platform'].specs" value="swagger">
							<label for="swagger"><span>{...}</span>Swagger</label>
						</div>
						<div class="fol-6 choose">
							<input type="radio" name="specs" id="wsdl" v-on:click="chooseSpec" v-model="api['x-abyss-platform'].specs" value="wsdl">
							<label for="wsdl"><span><i class="fas fa-code"></i></span>WSDL</label>
						</div>
						<div class="fol-6 choose">
							<input type="radio" name="specs" id="wadl" v-on:click="chooseSpec" v-model="api['x-abyss-platform'].specs" value="wadl">
							<label for="wadl"><span><i class="fas fa-code"></i></span>WADL</label>
						</div>
					</div>
					<h5>or</h5>
					<button type="button" class="btn btn-lg btn-rounded btn-success">CREATE NEW PROXY</button>
				</div>

				<div class="code-editor">
					<div class="clearfix column-header column-min-button">
						<div class="dropdown column-header-button">
							<button type="button" class="dropdown-toggle btn btn-lg btn-link txt-link btn-square" data-toggle="dropdown" aria-expanded="false"><i class="fas fa-ellipsis-h"></i></button>
							<ul class="dropdown-menu dropdown-menu-right" role="menu">
								<li v-if="outputRendered"><a href="#" id="copy-all"><i class="fa fa-fw fa-copy"></i>Copy</a></li>
								<li v-if="outputRendered"><a href="#" id="download-all"><i class="fa fa-fw fa-download"></i>Download</a></li>
								<li><a href="#" v-on:click="renderOutputAll('yaml');">YAML</a></li>
								<li><a href="#" v-on:click="renderOutputAll('json');">JSON</a></li>
								<li><a href="#" v-on:click="swaggerRendered = false;outputRendered = false;uploadRendered = true"><i class="fa fa-fw fa-upload"></i>Show Upload</a></li>
								<li><a href="#" v-on:click="swaggerRendered = true;outputRendered = false;uploadRendered = false"><i class="fa fa-fw fa-upload"></i>Show Swagger</a></li>
								<li><a v-on:click="loadSchema()"><i class="fa fa-fw fa-upload"></i>Load Definition</a></li>
								<li><a v-on:click="loadFromUrlSchema('/data/pet3.json')"><i class="fa fa-fw fa-paw"></i>Demo</a></li>
								<li><a v-on:click="clearSchema()"><i class="fa fa-fw fa-trash-alt"></i>Remove All</a></li>
							</ul>
						</div>
						<h5 class="column-header-title">Editor</h5>
					</div>
					<api-output :openapi="openapi" :editor-type="editorType" v-show="outputRendered" inline-template>
					<div class="acedit acedit-single" id="all-output">
						<pre class="prettyprint"><code :id="'pretty-'+editorType">{{openapi}}</code></pre>
					</div>
					</api-output>
					<textarea class="acedit w-50 code" v-show="uploadRendered" v-on:keyup="editingSchema($event.target.value)" v-on:paste="uploadSchema($event.target.value)" v-model="importschema">{{importschema}}</textarea>
					<textarea class="acedit w-50 code" style="left:50%" v-show="uploadRendered" v-model="swaggerText.text">{{swaggerText.text}}</textarea>
					<div id="swagger-editor" v-show="swaggerRendered" class="hidee"></div>
				</div>

				<div class="preview-item p-3 p-lg-6" v-if="rootState == 'preview'">
					<div th:replace="webroot/frags/api/api-preview.htm :: apiPreview"></div>
				</div>
			</section>

			<div class="btn-float-br" v-if="rootState == 'edit' || rootState == 'create'">
				<button type="button" class="btn btn-secondary btn-xl btn-circle" v-on:click="beforeCancelApi()"><i class="fas fa-times"></i></button>
				<button type="button" class="btn btn-secondary btn-xl btn-circle" v-on:click="undoApi()"><i class="fas fa-undo"></i></button>
				<button type="button" class="btn btn-green btn-xl btn-circle" v-if="rootState == 'create'" v-on:click="createApi()"><i class="fas fa-plus"></i></button>
				<button type="button" class="btn btn-primary btn-xl btn-circle" v-if="rootState == 'edit'" v-bind:class="{'btn-info': isChanged}" v-on:click="saveMyApi()"><i class="fas fa-save"></i></button>
			</div>

		</div>
	</my-apis>
	</main>

</div>

<!-- TTTTTTTTTTTTTTTTTTTTT -->
<div class="hide">
	<div id="template-method">
		<article class="field-controls field-method" :class="'field-color-'+httpMethod" :data-deprecated="method.deprecated">
			<div class="field-sum">
				<a href="#" class="field-link pb-2" data-toggle="collapse" title="Toggle operation" v-bind:data-target="'#method_main_'+_uid" v-bind:aria-controls="'method_main_'+_uid">
					<strong class="font-weight-black"><span class="badge badge-method badge-primary text-uppercase">{{httpMethod}}</span> {{path}}</strong>
					<span class="d-block text-right">{{method.operationId}}</span>
					<small :title="method.description" class="d-block font-italic text-right">{{method.summary}}</small>
				</a>
				<div class="ficon-actions dropdown dropdown-hover">
					<button type="button" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fas fa-ellipsis-h"></i></button>
					<ul class="dropdown-menu dropdown-menu-right" role="menu">
						<li><a v-on:click="addOperation()"><i class="fa fa-fw fa-plus"></i> Add operation</a></li>
						<li><a v-on:click="duplicateOperation(method)"><i class="fa fa-fw fa-copy"></i> Duplicate operation</a></li>
						<li><a v-on:click="removeOperation(index)"><i class="fa fa-fw fa-trash-alt"></i> Remove operation</a></li>
					</ul>
				</div>
				<div class="fow form--row m-0 border-top text-center field-tabs-btn">
					<a href="#" class="fol-4" data-toggle="collapse" v-bind:data-target="'#method_security_'+_uid" v-bind:aria-controls="'method_security_'+_uid">
						<span class="text-muted small d-block">Security</span>
						<strong class="font-weight-bolder">{{secType}}</strong>
					</a>
					<a href="#" class="fol-4 border-left border-right" data-toggle="collapse" v-bind:data-target="'#method_parameters_'+_uid" v-bind:aria-controls="'method_parameters_'+_uid">
						<span class="text-muted small d-block">Parameters</span>
						<strong class="font-weight-bolder" v-if="method.parameters">{{method.parameters.length}}</strong>
					</a>
					<a href="#" class="fol-4" data-toggle="collapse" v-bind:data-target="'#method_responses_'+_uid" v-bind:aria-controls="'method_responses_'+_uid">
						<span class="text-muted small d-block">Responses</span>
						<strong class="font-weight-bolder">{{getObjCount(method.responses)}}</strong>
					</a>
				</div>
				<div class="fow form--row m-0 border-top text-center field-tabs-btn">
					<a href="#" class="fol-4" data-toggle="collapse" v-bind:data-target="'#method_requestbodies_'+_uid" v-bind:aria-controls="'method_requestbodies_'+_uid">
						<span class="text-muted small d-block">RequestBody</span>
						<strong class="font-weight-bolder">{{getObjCount(method.requestBody)}}</strong>
					</a>
					<a href="#" class="fol-4 border-left border-right" data-toggle="collapse" v-bind:data-target="'#method_callbacks_'+_uid" v-bind:aria-controls="'method_callbacks_'+_uid">
						<span class="text-muted small d-block">Callbacks</span>
						<strong class="font-weight-bolder">{{getObjCount(this.method.callbacks)}}</strong>
					</a>
					<a href="#" class="fol-4" data-toggle="collapse" v-bind:data-target="'#method_links_'+_uid" v-bind:aria-controls="'method_links_'+_uid">
						<span class="text-muted small d-block">Links</span>
						<strong class="font-weight-bolder">{{getObjCount(this.method.links)}}</strong>
					</a>
				</div>
			</div>
			<ul class="field-controls" data-id="Main">
				<li v-bind:id="'method_main_'+_uid" class="collapse field-tabs">
					<h6 class="field-header row">Main</h6>
					<div class="field-acc">
						<div class="fow form-row">
							<div class="fol-8 form-group">
								<label>Method</label>
								<select class="form-control" v-model="httpMethod">
									<option value="GET">GET</option>
									<option value="POST">POST</option>
									<option value="PUT">PUT</option>
									<option value="DELETE">DELETE</option>
									<option value="HEAD">HEAD</option>
									<option value="PATCH">PATCH</option>
									<option value="OPTIONS">OPTIONS</option>
									<option value="TRACE">TRACE</option>
								</select>
							</div>
							<div class="fol-4 form-group text-right">
								<label class="d-block">Deprecated</label>
								<span class="switch switch-primary ml-auto">
								<input type="checkbox" v-model="method.deprecated" :id="'deprecated'+_uid">
								<label :for="'deprecated'+_uid"></label>
								</span>
							</div>
						</div>
						<div class="form-group">
							<label>OperationId</label>
							<input class="form-control" v-model="method.operationId">
						</div>
						<div class="form-group">
							<label>Summary</label>
							<input class="form-control" v-model="method.summary">
						</div>
						<div class="form-group">
							<label>Description</label>
							<a title="Preview markdown" v-on:click="markdownPreview()"><i class="fa fa-check-circle"></i></a>
							<textarea class="form-control" :id="descId" v-model="method.description"></textarea>
						</div>
						<div class="form-group">
							<label>Tags</label>
							<v-select label="name" multiple taggable :filterable="false" :options="mtags" v-model="vtags"></v-select>
						</div>
						<div class="form-group">
							<label>Docs Description</label>
							<textarea class="form-control" v-model="method.externalDocs.description"></textarea>
						</div>
						<div class="form-group">
							<label>Docs URL</label>
							<input type="url" class="form-control" v-model="method.externalDocs.url">
						</div>
					</div>
				</li>
			</ul>
			<ul class="field-controls" data-id="Parameter">
				<li v-bind:id="'method_parameters_'+_uid" class="collapse field-tabs">
					<h6 class="field-header">Parameters</h6>
					<div class="ficon-act ficon-act-link" v-if="method.parameters.length==0">
						<a class="w-100" v-on:click="addParameter()">Create Parameter <i class="fa fa-fw fa-plus"></i></a>
					</div>
					<api-parameter :parameter="parameter" :index="index" v-for="(parameter,index) in method.parameters" :key="index"></api-parameter>
				</li>
			</ul>
			<ul class="field-controls" data-id="Responses">
				<li v-bind:id="'method_responses_'+_uid" class="collapse field-tabs pt-0">
					<h6 class="field-header">Responses</h6>
					<api-response v-for="(response, status) in method.responses" :openapi="openapi"
						:response="response" :key="status" :status="status" :method="method" inline-template>
						<div class="field-acc">
							<span class="ficon-act ficon-act-abs">
								<a title="Add response" v-on:click="addResponse()"><i class="fa fa-fw fa-plus"></i></a>
								<a title="Remove response" v-on:click="removeResponse()"><i class="fa fa-fw fa-trash-alt"></i></a>
							</span>
							<div class="form-group">
								<label>Status Code</label>
								<input class="form-control" size="3" v-model.lazy="statusCode">
							</div>
							<div class="form-group">
								<label>Description</label>
								<input class="form-control" placeholder="Required" v-model="response.description">
							</div>
							<api-mediatype :openapi="openapi" v-for="(content, mediatype) in response.content"
								:content="content" :key="mediatype" :mediatype="mediatype" :container="response" inline-template>
								<div class="position-relative pt-3">
									<div class="field level is-horizontal is-grouped">
										<span class="ficon-act ficon-act-abs">
											<a title="Add media-type" v-on:click="addMediaType()"><i class="fa fa-fw fa-plus"></i></a>
											<a title="Duplicate media-type" v-on:click="duplicateMediaType()"><i class="fa fa-fw fa-copy"></i></a>
											<a :title="schemaTooltip" v-on:click="editMediaType(mediatype)"><i class="fa fa-fw fa-edit"></i></a>
											<a title="Remove media-type" v-on:click="removeMediaType()"><i class="fa fa-fw fa-trash-alt"></i></a>
										</span>
										<div class="form-group">
											<label>Media-Type</label>
											<input class="form-control" placeholder="Required" v-model.lazy="mediaTypeName">
										</div>
									</div>
								</div>
							</api-mediatype>
						</div>
					</api-response>
				</li>
			</ul>
			<ul class="field-controls" data-id="Security">
				<li v-bind:id="'method_security_'+_uid" class="collapse field-tabs pb-0">
					<h6 class="field-header">Security</h6>
					<div class="field-acc">
						<div class="form-group pt-1 mb-2">
							<!-- if (!openapi.security) openapi.security = []; -->
							<span class="radio radio-primary d-inline-block">
								<input :id="'chkDefault_'+_uid" class="radio" type="radio" value="default" v-model.lazy="secType"/>
								<label :for="'chkDefault_'+_uid">Use default security</label>
							</span>
							<span class="radio radio-primary d-inline-block">
								<input :id="'chkNone_'+_uid" class="radio" type="radio" value="none" v-model.lazy="secType"/>
								<label :for="'chkNone_'+_uid">Disable security</label>
							</span>
							<span class="radio radio-primary d-inline-block">
								<input :id="'chkCustom_'+_uid" class="radio" type="radio" value="custom" v-model.lazy="secType"/>
								<label :for="'chkCustom_'+_uid">Use custom security</label>
							</span>
						</div>
						<div v-if="secType === 'custom'" class="field-controls txt-black">
							<div class="pb-2"><strong>Selected security schemes</strong></div>
							<div class="field-link row" v-for="(scheme,index) in method.security">
								<span class="ficon-act ficon-act-abs">
								<a title="Remove security scheme from operation" v-on:click="removeSecScheme(index)"><i class="fa fa-trash-alt"></i></a>
								</span>
								<strong class="d-block">{{Object.keys(scheme)[0]}}</strong>
								<span>{{Object.values(scheme)[0]}}</span>
							</div>
						</div>
					</div>
				</li>
			</ul>
			<ul class="field-controls" data-id="RequestBody">
				<li v-bind:id="'method_requestbodies_'+_uid" class="collapse field-tabs pt-0">
					<h6 class="field-header">Request Body</h6>
					<div class="ficon-act ficon-act-link" v-if="!method.requestBody">
						<a class="w-100" v-on:click="addRequestBody()">Create Request Body <i class="fa fa-fw fa-plus"></i></a>
					</div>
					<div class="field-acc" v-if="method.requestBody">
						<div class="form-group">
							<label>Description</label>
							<textarea class="form-control" v-model="effectiveRequestBody.description"></textarea>
						</div>
						<div class="form-inline">
							<div class="form-group">
								<label class="">Required</label>
								<span class="switch switch-primary ml-auto">
									<input type="checkbox" :id="'effectiveRequestBody'+_uid" v-model="effectiveRequestBody.required">
									<label :for="'effectiveRequestBody'+_uid"></label>
								</span>
							</div>
						</div>
						<api-mediatype :openapi="openapi" v-for="(content, mediatype) in effectiveRequestBody.content"
							:content="content" :key="mediatype" :mediatype="mediatype" :container="effectiveRequestBody" inline-template>
							<div class="position-relative">
								<span class="ficon-act ficon-act-abs">
									<a title="Add media-type" v-on:click="addMediaType()"><i class="fa fa-fw fa-plus"></i></a>
									<a title="Duplicate media-type" v-on:click="duplicateMediaType()"><i class="fa fa-fw fa-copy"></i></a>
									<a :title="schemaTooltip" v-on:click="editMediaType(mediatype)"><i class="fa fa-fw fa-edit"></i></a>
									<a title="Remove media-type" v-on:click="removeMediaType()"><i class="fa fa-fw fa-trash-alt"></i></a>
								</span>
								<div class="form-group">
									<label>Media-Type</label>
									<input class="form-control" placeholder="Required" v-model.lazy="mediaTypeName">
								</div>
							</div>
						</api-mediatype>
					</div>
				</li>
			</ul>
			<ul class="field-controls" data-id="Callbacks">
				<li v-bind:id="'method_callbacks_'+_uid" class="collapse field-tabs">
					<h6 class="field-header">Callbacks</h6>
					<div class="ficon-act ficon-act-link" v-if="!method.callbacks || Object.keys(method.callbacks).length == 0">
						<a class="w-100" v-on:click="addCallback()">Create Callback <i class="fa fa-fw fa-plus"></i></a>
					</div>
					<!-- todo callbacks -->
					<div v-for="(callback, cbname) in method.callbacks" v-if="method.callbacks && Object.keys(method.callbacks).length>0" class="position-relative">
						<div class="field-acc">
							<span class="ficon-act ficon-act-abs">
								<a title="Add callback" v-on:click="addCallback()"><i class="fa fa-fw fa-plus"></i></a>
								<a title="Duplicate callback" v-on:click="duplicateCallback(cbname)"><i class="fa fa-fw fa-copy"></i></a>
								<a title="Remove callback" v-on:click="removeCallback(cbname)"><i class="fa fa-fw fa-trash-alt"></i></a>
							</span>
							<div class="form-group">
								<label>Name</label>
								<input class="form-control" v-on:focus="storeCallbackName(cbname)" v-on:change="renameCallback(cbname)" v-model.lazy="cbname">
							</div>
						</div>
						<div class="ficon-act justify-content-end" v-if="Object.keys(callback).length==0">
							<a v-on:click="addCallbackURL(cbname)">Add URL Expression <i class="fa fa-fw fa-plus"></i> </a>
						</div>
						<div v-for="(expression, expname) in callback" class="position-relative">
							<div class="field-acc">
								<span class="ficon-act ficon-act-abs">
									<a title="Add expression" v-on:click="addCallbackURL(cbname)"><i class="fa fa-fw fa-plus"></i></a>
									<a title="Duplicate expression" v-on:click="duplicateExpression(cbname,expname)"><i class="fa fa-fw fa-copy"></i></a>
									<a title="Remove expession" v-on:click="removeExpression(cbname,expname)"><i class="fa fa-fw fa-trash-alt"></i></a>
								</span>
								<div class="form-group">
									<label>URL Expression</label>
									<input class="form-control" v-on:focus="storeExpressionName(expname)" v-on:change="renameExpression(cbname,expname)" v-model.lazy="expname">
								</div>
							</div>
							<div class="ficon-act justify-content-end" v-if="Object.keys(expression).length == 0">
								<a v-on:click="addExpressionOperation(expression)">Add Operation <i class="fa fa-fw fa-plus"></i></a>
							</div>
							<api-method :openapi="openapi" :method="method" :index="key" :maintags="maintags" v-for="(method,key,index) in expression" :key="index" :path="index"></api-method>
						</div>
					</div>
				</li>
			</ul>
			<ul class="field-controls" data-id="Links">
				<li v-bind:id="'method_links_'+_uid" class="collapse field-tabs">
					<!-- todo -->
					<h6 class="field-header">Links</h6>
					<div class="ficon-act ficon-act-link" v-if="!method.links || Object.keys(method.links).length == 0">
						<a class="w-100" v-on:click="addLink()">Create Link <i class="fa fa-fw fa-plus"></i></a>
					</div>
					<api-parameter :parameter="parameter" :index="index" v-for="(parameter,index) in method.links" :key="index"></api-parameter>
				</li>
			</ul>
		</article>
	</div>

	<div id="template-parameter">
		<article class="field-controls">
			<div class="field-sum">
				<a href="#" class="field-link" data-toggle="collapse" title="Toggle parameter" :data-target="hashUid">
					<strong class="font-weight-black">{{parameter.name}}</strong>
				</a>
				<div class="ficon-actions dropdown dropdown-hover">
					<button type="button" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fas fa-ellipsis-h"></i></button>
					<ul class="dropdown-menu dropdown-menu-right" role="menu">
						<li><a v-on:click="addParameter()"><i class="fa fa-fw fa-plus"></i> Add parameter</a></li>
						<li><a v-on:click="duplicateParameter()"><i class="fa fa-fw fa-copy"></i> Duplicate parameter</a></li>
						<a :title="schemaTooltip" v-on:click="editSchema()"><i class="fa fa-fw fa-edit"></i></a>
						<li><a v-on:click="removeParameter()"><i class="fa fa-fw fa-trash-alt"></i> Remove parameter</a></li>
					</ul>
				</div>
			</div>
			<div class="collapse field-acc" :id="_uid" class="field-controls">
				<div class="form-group">
					<label>Parameter Name</label>
					<input class="form-control" placeholder="Required" v-model="parameter.name" required>
				</div>
				<div class="form-group">
					<label>Description</label>
					<a title="Preview markdown" v-on:click="markdownPreview()"><i class="fa fa-check-circle"></i></a>
					<textarea v-model="parameter.description" :id="descId" class="form-control"></textarea>
				</div>
				<div class="form-group">
					<label>Location</label>
					<select class="form-control" v-model="effectiveIn" required>
						<option value="path">Path</option>
						<option value="query">Query</option>
						<option value="header">Header</option>
						<option value="cookie">Cookie</option>
					</select>
				</div>
				<div class="form-group">
					<label>Data Type</label>
					<select class="form-control" v-model="effectiveType" required>
						<option value="boolean">Boolean</option>
						<option value="string">String</option>
						<option value="integer">Integer</option>
						<option value="number">Number</option>
						<option value="array">Array</option>
						<option value="object">Object</option>
					</select>
				</div>
				<div class="fow form-row">
					<div class="fol-4 form-group">
						<label>Required</label>
						<span class="switch switch-primary ml-auto">
							<input type="checkbox" :id="'paramRequired_'+_uid" v-model="effectiveRequired" :disabled="effectiveIn == 'path' ? true : false">
							<label :for="'paramRequired_'+_uid"></label>
						</span>
					</div>
					<div class="fol-5 form-group text-center" v-if="parameter.in == 'query'">
						<label>Allow Empty Value</label>
						<span class="switch switch-primary ml-auto">
							<input type="checkbox" :id="'paramEmpty_'+_uid" v-model="parameter.allowEmptyValue">
							<label :for="'paramEmpty_'+_uid"></label>
						</span>
					</div>
					<div class="fol-3 text-right form-group">
						<label>Deprecated</label>
						<span class="switch switch-primary ml-auto">
							<input type="checkbox" :id="'paramDeprecated_'+_uid" v-model="parameter.deprecated">
							<label :for="'paramDeprecated_'+_uid"></label>
						</span>
					</div>
				</div>
				<div class="form-group" v-if="!isComplex()">
					<label>Default Value</label>
					<input class="form-control" v-model="parameter.default">
				</div>
				<div class="ficon-act justify-content-end">
					<a v-on:click="addEnum()">Add Enum <i class="fa fa-fw fa-plus"></i></a>
				</div>
				<div v-if="!isComplex() && parameter.enum && parameter.enum.length">
					<div v-for="(evalue,eindex) in parameter.enum" class="">
						<div class="form-group pt-3">
							<span class="ficon-act ficon-act-abs">
								<a title="Add Enum value" v-on:click="addVEnum(variable)"><i class="fa fa-plus"></i></a>
								<a title="Remove Enum value" v-on:click="removeEnum(eindex)"><i class="fa fa-trash-alt"></i></a>
							</span>
							<label>Enum Value</label>
							<input class="form-control" v-model="parameter.enum[eindex]">
						</div>
					</div>
				</div>
				<div class="form-group" v-if="effectiveFormats.length">
					<label>Format</label>
					<input class="form-control" type="text" v-model="parameter.format" :list="formatListId">
					<datalist :id="formatListId">
						<option v-for="option in effectiveFormats">{{option}}</option>
					</datalist>
				</div>
				<div v-if="parameter.schema.type == 'string'">
					<div class="fow form-row">
						<div class="fol-6 form-group">
							<label>Min. Length</label>
							<input class="form-control" type="number" min="0" step="1" v-model="parameter.minLength">
						</div>
						<div class="fol-6 form-group">
							<label>Max. Length</label>
							<input class="form-control" type="number" min="0" step="1" v-model="parameter.maxLength">
						</div>
					</div>
					<div class="form-group">
						<label>Pattern</label>
						<input class="form-control" v-model="parameter.pattern">
					</div>
				</div>
				<div v-if="parameter.schema.type == 'integer' || parameter.schema.type == 'number'">
					<div class="fow form-row">
						<div class="fol-6 form-group">
							<label>Min. Exclusive</label>
							<span class="switch switch-primary ml-auto">
								<input type="checkbox" :id="'paramMinExc'+_uid" v-model="parameter.minExclusive">
								<label :for="'paramMinExc'+_uid"></label>
							</span>
						</div>
						<div class="fol-6 form-group">
							<label>Max. Exclusive</label>
							<span class="switch switch-primary ml-auto">
								<input class="form-control" type="checkbox" :id="'paramMaxExc'+_uid" v-model="parameter.maxExclusive">
								<label :for="'paramMaxExc'+_uid"></label>
							</span>
						</div>
					</div>
					<div class="fow form-row">
						<div class="fol-4 form-group">
							<label>Minimum</label>
							<input class="form-control" type="number" v-model="parameter.minimum">
						</div>
						<div class="fol-4 form-group">
							<label>Maximum</label>
							<input class="form-control" type="number" v-model="parameter.maximum">
						</div>
						<div class="fol-4 form-group">
							<label>Multiple Of</label>
							<input class="form-control" type="number" v-model="parameter.multipleOf">
						</div>
					</div>
				</div>
				<api-items v-if="parameter.schema.type == 'array'" :parent="parameter" :child="parameter.schema.items" :level="1"></api-items>
			</div>
		</article>
	</div>

	<div id="template-items">
		<div class="pppppppppppppp">
			<div class="form-group">
				<label>Item Type</label>
				<select class="form-control" v-model="effectiveType">
					<option value="string">String</option>
					<option value="integer">Integer</option>
					<option value="number">Number</option>
					<option value="boolean">Boolean</option>
					<option value="array">Array</option>
				</select>
			</div>
			<!-- TODO replace this with style and explode etc -->
			<!-- <div class="form-group">
				<label>Collection Delimiter</label>
				<select class="form-control" v-model="parent.collectionFormat" required size="2">
					<option value="csv">Comma</option>
					<option value="tsv">Tab</option>
					<option value="ssv">Space</option>
					<option value="pipes">Pipe</option>
					<option value="multi" v-if="level==1">Multiple</option>
				</select>
			</div>
			-->
			<div class="form-group">
				<label>Default Value</label>
				<input class="form-control" v-model="child.default">
			</div>
			<div class="ficon-act justify-content-end">
				<a v-on:click="addEnum()">Add Enum <i class="fa fa-fw fa-plus"></i></a>
			</div>
			<div v-for="(evalue,eindex) in child.enum" class="">
				<div class="form-group pt-3">
					<span class="ficon-act ficon-act-abs">
						<a title="Delete Enum" v-on:click="removeEnum(eindex)"><i class="fa fa-trash-alt"></i></a>
						<a title="Add Enum" v-on:click="addEnum()"><i class="fa fa-plus"></i></a>
					</span>
					<label>Enum Value</label>
					<input class="form-control" v-model="child.enum[eindex]">
				</div>
			</div>
			<div class="form-group" v-if="effectiveFormats.length">
				<label>Format</label>
				<input class="form-control" type="text" v-model="child.format" :list="formatListId">
				<datalist :id="formatListId">
					<option v-for="option in effectiveFormats">{{option}}</option>
				</datalist>
			</div>
			<div class="fow form-row">
				<div class="fol-4 form-group">
					<label>Min. Items</label>
					<input class="form-control" type="number" min="0" step="1" v-model="parent.minItems">
				</div>
				<div class="fol-4 form-group">
					<label>Max. Items</label>
					<input class="form-control" type="number" min="0" step="1" v-model="parent.maxItems">
				</div>
				<div class="fol-4 text-right form-group">
					<label>Unique Items</label>
					<span class="switch switch-primary ml-auto">
						<input type="checkbox" :id="'uniqueItems_'+_uid+level" v-model="parent.uniqueItems">
						<label :for="'uniqueItems_'+_uid+level"></label>
					</span>
				</div>
			</div>
			<div v-if="child.type == 'string'">
				<div class="form-group">
					<label>Min. Length</label>
					<input class="form-control" type="number" min="0" step="1" v-model="child.minLength">
				</div>
				<div class="form-group">
					<label>Max. Length</label>
					<input class="form-control" type="number" min="0" step="1" v-model="child.maxLength">
				</div>
				<div class="form-group">
					<label>Pattern</label>
					<input class="form-control" v-model="child.pattern">
				</div>
			</div>
			<div v-if="child.type == 'integer' || child.type == 'number'">
				<div class="fow form-row">
					<div class="fol-6 form-group">
						<label>Min. Exclusive</label>
						<span class="switch switch-primary ml-auto">
							<input type="checkbox" :id="'childMinExc'+_uid+level" v-model="child.minExclusive">
							<label :for="'childMinExc'+_uid+level"></label>
						</span>
					</div>
					<div class="fol-6 form-group">
						<label>Max. Exclusive</label>
						<span class="switch switch-primary ml-auto">
							<input class="form-control" type="checkbox" :id="'childMaxExc'+_uid+level" v-model="child.maxExclusive">
							<label :for="'childMaxExc'+_uid+level"></label>
						</span>
					</div>
				</div>
				<div class="fow form-row">
					<div class="fol-4 form-group">
						<label>Minimum</label>
						<input class="form-control" type="number" v-model="child.minimum">
					</div>
					<div class="fol-4 form-group">
						<label>Maximum</label>
						<input class="form-control" type="number" v-model="child.maximum">
					</div>
					<div class="fol-4 form-group">
						<label>Multiple Of</label>
						<input class="form-control" type="number" v-model="child.multipleOf">
					</div>
				</div>
			</div>
			<api-items v-if="child.type == 'array'" :parent="child" :child="child.items" :level="levelPlusOne"></api-items>
		</div>
	</div>
</div>

<div id="schemaModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="schemaModal" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" onclick="schemaEditorClose()" aria-hidden="true">×</button>
				<h5 class="modal-title" id="schemaModalTitle">Schema Editor</h5>
			</div>
			<div class="modal-body p-0">
				<div id="schemaContainer"></div>
			</div>
			<div class="modal-footer d-flex justify-content-between">
				<button type="button" class="btn btn-secondary btn-rounded" onclick="schemaEditorClose()">Close</button>
				<button type="button" class="btn btn-primary btn-rounded" onclick="schemaEditorSave()">Save Changes</button>
			</div>
		</div>
	</div>
</div>

<div id="mdPreview" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mdPreview" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
				<h5 class="modal-title">Markdown Preview</h5>
			</div>
			<div class="modal-body p-3">
				<span id="mdPreviewText"></span>
			</div>
		</div>
	</div>
</div>

<div id="alert" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="alert" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-body p-6">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
				<span id="alertText"></span>
			</div>
		</div>
	</div>
</div>

<div id="confirm" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="confirm" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
				<h5 class="modal-title" id="confirmTitle">Alert</h5>
			</div>
			<div class="modal-body p-6">
				<span id="confirmSubtitle"></span>
			</div>
			<div class="modal-footer d-flex justify-content-between">
				<a data-dismiss="modal"><span class="btn btn-secondary btn-rounded">Cancel</span></a>
				<a data-dismiss="modal" id="confirmOk"><span class="btn btn-primary btn-rounded">Confirm</span></a>
			</div>
		</div>
	</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.5/clipboard.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
<script src="/dist/js/plugins/openapi/js-yaml.min.js"></script>
<script src="/dist/js/plugins/openapi/jsonpatch.js"></script>
<script src="/dist/js/plugins/openapi/jsoneditor.min.js"></script>
<script src="/dist/js/plugins/openapi/markdown-it.min.js"></script>
<script src="/dist/js/swagger/swagger-editor-bundle.js"> </script>
<script id="reqVue" data-module="openapi" data-main="/dist/js/main" src="/dist/js/lib/require.min.js"></script>
</body>
</html>

