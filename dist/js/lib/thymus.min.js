/*!
 * thymus.js v1.0.0 (http://thymusjs.org)
 * Copyright 2013-2014 Akira LLC
 * Licensed under MIT (https://github.com/ugate/thymus/blob/master/LICENSE)
 */
+function(a){function b(b){var c=this,d=b;c.cache=function(b){return b instanceof a&&(d=d instanceof a?d.add(b):b),d},c.clear=function(a){return d=null,a?c:null}}function c(c,d){var e=this,g=new b(c),h=new b(d);e.detachCache=new b,e.rsltCache=function(b){return h.cache(b instanceof a?b:"object"==typeof b?a(b):b)},e.destCache=function(a){return g.cache(a)},e.manip=function(b,c){var d=g.cache(),i=h.cache();if(d&&i){i=i.is(Q)?i.contents():i;var j="function"==typeof c?function(a){return c(d,i,a,this)}:null;if("function"==typeof b)b(d,i);else if(b)d.append(j?j:c?c:i);else{var k=j?j:c?c:i;a.isArray(k)?f.apply(d,k):f.call(d,k),e.detachCache.cache(d)}return i}return null},e.clear=function(a){return g=g.clear(a),h=h.clear(a),a?e:null}}function d(d,e,f,g,h){function i(a,b,c){if(a&&b&&"function"==typeof c){var d={x:b,fx:c};a.push(d)}}function j(a,b){if(b&&b.length>0)for(var c=0;c<a.length;c++){var d=a[c].x;if(d.is(b))return a[c].fx}return null}var k=this,l=new c(e,f),m=new c(g,h),n=null,o=[],p=null;k.rsltCache=function(a){return l.rsltCache(a)},k.destCache=function(a,b){return i(o,a,b),l.destCache(a)},k.detachCache=function(){return n},k.manips=function(c){p=p?p:new b;var e=p.cache(l.manip(d,o.length>0?function(b,c,d,e){var f=a(e),g=j(o,f);return g?g(f,c):c.clone(!0,!0)}:null));return n=l.detachCache,p=p.clear(c),k.clear(c),e},k.clear=function(a){return l=l?l.clear(a):a?new c:null,m=m?m.clear(a):a?new c:null,p=p?p.clear(a):a?new c:null,a?k:null}}function e(){function a(a,b,c){return a?a.add(b.manips(c)):b.manips(c)}var b=this,c=new d(!0),e=new d(!1),f=null,g=[];b.detachCache=function(){return f},b.rsltCache=function(a,b,f){if(f){var h=new d(a);return h.rsltCache(b),g[g.length]=h,h.rsltCache()}return(a?c:e).rsltCache(b)},b.destCache=function(a,b,d,f){if(!f)return(a?c:e).destCache(b,d);for(var h=0;h<g.length;h++)if(f.is(g[h].rsltCache()))return g[h].destCache(b,d)},b.appendReplaceAll=function(d){for(var h=null,i=0;i<g.length;i++)h=a(h,g[i],d);return h=a(h,c,d),h=a(h,e,d),f=e.detachCache(),b.clear(d),h},b.clear=function(a){return c=c?c.clear(a):a?new d(!0):null,e=e?e.clear(a):a?new d(!1):null,g=a?[]:null,a?b:null}}function f(){var a=jQuery.map(this,function(a){return[a.nextSibling,a.parentNode]}),b=0;return this.domManip(arguments,function(c){var d=a[b++],e=a[b++];e&&(d&&d.parentNode!==e&&(d=this.nextSibling),jQuery(this).detach(),e.insertBefore(c,d))},!0),b?this:this.detach()}function g(b,c,d,e,f,g,h){function i(b){var c=l(k,a(this),b);"function"==typeof h&&h(c,b)}var j=a(c),k=a(b),l=g,m=d;this.update=function(b,c,d,e){k=b?a(b):k,l=d||l,(c&&c!=m||0==e)&&(j.off(m,f,i),m=c||m),1==e&&j.on(m,f,i)},this.isMatch=function(a,b){return this.getMethod()==a&&this.getElement().is(b)},this.getElement=function(){return j},this.getEvent=function(){return m},this.getMethod=function(){return e},this.update(null,null,null,!0)}function h(a,b,c,d,e,f,h,j){function k(a){a===!0&&(fb[n].update(null,null,null,!1),fb[n]=null)}var l=i(f,!1);if(!e)throw new Error('Cannot register "'+l+'" event for function action "'+j+'" on element(s) from selector "'+selector+'" prior to being added to the DOM');for(var m in fb)if(fb[m].isMatch(c,e)&&fb[m].getEvent()==l)return fb[m].update(d,null,j,null),!0;var n=b+"."+c+ ++gb,o=null;return fb[n]=new g(d,e,l,c,h,j,k),fb[n].getElement().on("remove",h,function(){k(!0)}),{funcName:n,eventAttrValue:o,eventName:l}}function i(a,b){return a&&0==a.toLowerCase().indexOf("on")?b?a:a.substr(2):b?"on"+a:a}function j(b,c,d,e){var f=this,g=null,h=0,i=b?t(b,c):[X];f.isAsync=i[0].toLowerCase()==Y?!1:!0;var j=i.length>1;i=j?i[1].toLowerCase():eb,f.target=d?t(d,e):["_self"],f.options=f.target.length>1?f.target[1]:void 0,f.history=f.target.length>2?f.target[2]:void 0,f.target=f.target[0],f.reuseMax=1,f.reuse=function(){return h<f.reuseMax?++h:0},f.isFullPageSync=function(){return!f.isAsync&&i==$},f.type=function(a){return!j&&a&&(i=a),i},f.getWin=function(b,c,d,e,h){function i(){function f(b){var e=j(),f=m||a(e),g=null;if(0==n?g=ib>0||hb?"ready":m?"submit":"unload":1==n&&(g="ready",f=a(e)),g)if(b)"ready"==g?x(c,d,j,function(){i()}):f.on(g,i);else{try{f.off(g,i)}catch(g){}n++}}var g=j(),i=null,k=g.location.href,l=g.location.hostname,m=b instanceof a&&b.is("form")?b:null;if(m&&a("body",g.document).append(m),e&&e.call(),h){var n=0;i=function(){f(),x(c,d,null,function(a,b){if(b)return void h.call(b);try{var c=j();if(l&&l!=c.location.hostname)return h.call(),!0;if(k!=c.location.href)return i=function(){f(),h.call()},f(!0),!0}catch(d){h.call(d)}})},f(!0)}m&&m.submit()}function j(a){var b=a||window;if("_self"!=f.target){var c="_"==f.target.charAt(0)?f.target.substring(1):f.target;b=b[c]}return b}try{if(!g&&"_blank"==f.type&&!b)return g=window.open("about:blank",f.target,f.options,f.history),g.document.write("<html><body></body></html>"),i(),g;g||(g=j(g)),"string"==typeof b?(g=window.open(b,f.target,f.options,f.history),i()):b&&i()}catch(k){h&&h.call(g,null,k)}return g},f.toString=function(){return v("object",f.constructor.name,"type",f.type(),"forceType",j,"target",f.target,"options",f.options,"history",f.history)}}function k(a,b,c,d,e){var f,g,h,i;if(a=a||"","function"==typeof e){var j=e(a);if(j)return j}for(b=b?b.split(J)[0].replace(c,"$1"):"",f=b?b.split(d):[],f.length>0&&f[f.length-1].indexOf(".")>-1&&f.pop(),g=a.split(d),h=0;h<g.length;h++)i=g[h],i&&"."!=i&&(".."==i?f.length&&f.pop():f.push(i));return b=f.join(d),b?b.replace(c,"$1"):b}function l(a,b,c){var d=kb;return d||(d=b),d=k(d,window.location.href,a,b,c),d+=d.lastIndexOf(b)!=d.length-1?b:""}function m(a,b,c,d){return k(a,l(b,c),b,c,d)}function n(a,b){function c(a){return"string"==typeof a?a.toLowerCase():""}function d(b,d){return b=c(b),d?d.replace(a,function(a,c,d){return f[b]||(f[b]=[]),f[b][c]=e(b,d),c}):""}function e(a,d){function e(b,c){return f[a]?f[a][c]:void 0}return a=c(a),d?o(d,b,e):""}var f=[];this.add=d,this.rep=e,this.get=function(a,b){return a=c(a),a?f[a]?b?f[a][b]:f[a].slice(0):f.slice(0):void 0}}function o(a,b,c,d,e){function f(a){var d=!1,e=a;do d=!1,e=e.replace(b,function(a,b){b="{"==b.indexOf(0)==0?b.substr(1):b;var e=c(a,b);return d=!0,f(e)});while(d);return e}return"string"==typeof a?f(e?e.rep(d,a):a):""}function p(b,c,d,e){if(!c&&!d||!b)return void 0;var f=c,g=null;if(d&&a.isArray(f=c?d[c]:d)){for(var h=0;h<f.length;h++)if(g=u(b,f[h]),!e&&void 0!==g||e&&g)return{attr:f[h],val:g}}else if("string"==typeof f)return g=u(b,f),void 0!==g?{attr:f,val:g}:null;return null}function q(b,c,d,e,f,g){function h(a,b,c,d){return(d&&a.length>0?d:"")+(b&&b.val?b.val+"=":"")+c}function i(c,f,i){var j="",k="";if(f){var l=f.toLowerCase()==V,m=f.toLowerCase()==W,n="";i.each(function(){k=a(this),n=e?p(k,null,e,!0):null,n=n?n.val:null;var b=l?k.text():m?k.html():void 0;void 0===b&&f&&(g&&(b=g(k,n,c,f)),!b&&k.is("["+f+"]")&&(b=u(k,f))),b&&(j+=h(j,n,b,d))})}else if(j=e?i.serialize():i.serializeArray(),!j||j.length<=0)j="",i.each(function(){k=a(this),j+=h(j,e?p(k,null,e,!0):null,k.val(),f)});else if(!e){var o=j;j="",a.each(o,function(){j+=h(j,null,this.value,d)})}return void 0!==j&&null!=j?j:b}if(b){var j=b?b.split(c):null,k=j?"function"==typeof f?f(j[0]):f instanceof a?f.find(j[0]):a(j[0]):null;if(k&&k.length>0){var l="",m="";return j&&j.length>2?(l=j[1],m=j[2]):j&&j.length>1&&(m=j[1]),i(l,m,k)}}return""}function r(b,c,d){function f(b,e){var f=null;try{f=b.sourceEvent?a(b.sourceEvent.target):b.source?b.source:b.target?b.target:b.actionScope,(f.is("video")||f.is("audio"))&&(f=f.parent());try{f.trigger(b)}catch(g){e("Error triggering fragment event "+(b?b.type+" "+b:"unknown event"),f,g)}var h=c&&b.chain===d.eventFragChain?u(c,d.fragListenerAttr):null,i=c&&b.chain===d.eventFragsChain?u(c,d.fragsListenerAttr):null;if(h||i){var j=h?h:i;if(j)try{var k=new s(d,j,b);if(k.isValid){var l=k.run(f);0==l.result&&(b.preventDefault(),b.stopPropagation())}}catch(g){e("Error in "+j+" "+(b?b:""),f,g)}}return b.isDefaultPrevented()}catch(g){e("Error broadcasting fragment event for "+(b?b.type+" "+b:"unknown event"),f,g)}return!1}function g(a,b,c,e){function g(){var g=a==d.eventFragChain?i(b,c,e):m(a,b,c);return f(g,function(a,b,d){var f=a+" for "+(e||c);c.addError(f,e,d),w(f,d)})}if(d.eventIsBroadcast&&(a==d.eventFragChain||a==d.eventFragsChain)){var h=b==d.eventFragsBeforeHttp||b==d.eventFragBeforeHttp;e?(e.frp.pathSiphon()?e&&(e.cancelled=g()):(c.addError("Invalid URL for "+e.toString(),e),e.cancelled=!0,h&&g()),e.cancelled&&c.ccnt++):h?c.cancelled=g():g()}}function i(b,c,d){var e=a.Event(b);return F(e,c,d),e.type=b,e}function m(b,c,e){var f=a.Event(c);return f.chain=b,f.sourceEvent=e.siphon.sourceEvent,f.action=e.action,f.frags=c==d.eventFragsLoad?e.genFragObjs():void 0,f.fragAdjustments=e.adjustments,f.fragCancelCount=e.ccnt,f.fragCount=e.cnt,f.actionScope=e.actionScope,f.searchScope=e.searchScope,f.destScope=e.destScope,f.errors=e.getErrors(),f.loadTime=e.elapsedTime(f.timeStamp),f.log=function(a,b){w(a?a:"",b,this)},f.toFormattedString=function(){return v("event chain",f.chain,"sourceEvent",f.sourceEvent,"action",f.action,"fragCancelCount",f.fragCancelCount,"fragCount",f.fragCount,"actionScope",f.actionScope,"searchScope",f.searchScope,"destScope",f.destScope,"errors",f.errors,"loadTime",f.loadTime)},f}function r(b,c,e,f,h,i){function j(b,c){c instanceof a&&c.length>0?m[b]=c:"undefined"==typeof m[b]&&(m[b]=a("html"))}var k=new Date,m=this;m.action=b,m.lastFrag=null,m.ctxPath=l(d.regexAbsPath,d.pathSep,rb),m.navOpts=i,m.cancelled=!1,m.ccnt=0,m.cnt=0,m.len=0;var o=!1,p=[],q=[];m.resetSiphon=function(a,b,c,e,f,g){j("actionScope",b),j("searchScope",c),j("destScope",e),m.isTopLevel=B(m.actionScope),"object"==typeof a?m.siphon=a:m.siphon?m.siphon.selector=a:m.siphon={selector:a},m.isShortHand="undefined"!=typeof f?f:m.actionScope.is(m.siphon.selector),(g||!m.siphon.vars)&&(m.siphon.vars=new n(d.regexVarNameVal,d.regexVarSiphon))},m.resetSiphon(h,c,e,f),m.queueFrag=function(a){var b=a.pseudoUrl();return p[b]?(p[b].frags[p[b].frags.length]=a,!1):(p[b]={result:null,status:null,xhr:null,frags:[a]},!0)},m.getQueuedFrags=function(a){return p[a.pseudoUrl()]},m.addFrag=function(a){q.push(a)},m.genFragObjs=function(){for(var a=[],b=0;b<q.length;b++)a.push(F({},m,q[b]));return a};var r=[];m.addError=function(b,c,d,e,f){function g(c){var g=new Error(b+(d?". Cause: "+d.message:"")),h={cause:d,status:e,statusCode:f?f.status:null};return c&&(h.fragSrc=F({},m,c)),a.extend(g,h),g}c?(c.e=g(),r[r.length]=g(c)):r[r.length]=g()},m.getErrors=function(){return r},m.elapsedTime=function(a){return(a?a:(new Date).getTime())-k.getTime()},m.hasJustCompleted=function(){return!o&&m.cnt>=m.len?o=!0:!1},m.done=function(a){if(m.hasJustCompleted()){a&&a(),g(d.eventFragsChain,d.eventFragsLoad,m);var b=m.detachCache();b&&b.cache()&&b.cache().remove()}};var s=null;m.detachCache=function(a){return s?a&&s.cache(a.cache()):s=a,s},m.adjustments=null}function x(b,c,f){var h=this;f.addFrag(h),h.pf=b,h.pel=f.actionScope,h.el=c,h.parentOrigin=c.parent();var i=f.siphon,k=null,l=null;!f.isShortHand&&(k=new X(d.ajaxTypeDefault,"load",null,i.selector,h.el,f.siphon.vars,!0,f.searchScope)).isValid?(k.vars=f.siphon.vars,i=k):f.isShortHand||(l=O(c,d.includeAttrs)),h.ajaxAsync=!0,h.navOpts=f.navOpts&&f.navOpts.reuse()?f.navOpts:new j(i.typeSiphon,d.typeSep,i.targetSiphon,d.targetSep),l||f.isShortHand?h.navOpts.type(ab):(l=O(c,d.replaceAttrs),h.navOpts.type(bb)),l=l?l.split(d.multiSep):null,h.eventSiphon=i.eventSiphon,h.delegateSiphon=i.delegateSiphon,h.method=i.method?i.method:d.ajaxTypeDefault,h.getVars=function(){return i.vars?i.vars.get(h.method):null},h.ws=i.withSiphon,i.vars&&h.ws&&i.vars.add(h.method,h.ws),h.fps=new gb(f,h,i.paramsSiphon,i.vars),h.frs=new hb(f,h,l?l&&l.length>1?a.trim(l[1]):null:i.resultSiphon,i.vars),h.frp=new _(f,h,l?l&&l.length>0?a.trim(l[0]):null:i.pathSiphon,i.vars),h.fds=new ib(f,h,!l&&i.destSiphon?i.destSiphon:h.el,i.vars),h.destResults=null,h.e=null,h.cancelled=!1;var m=1;h.ccnt=function(a){return a?m++:0==a&&0==--m&&(f.cnt++,g(d.eventFragChain,d.eventFragLoad,f,h)),m},h.pf&&h.pf.ccnt(!0),h.pseudoUrl=function(){return(h.frp.pathSiphon()?h.frp.pathSiphon():"")+(h.fps.params()?"?"+h.fps.params():"")},h.as=i.agentSiphon,h.done=function(){h.cancelled?f.cnt++:h.ccnt(!1);for(var a=h;a=a.pf;)a.ccnt(!1);f.detachCache(h.detachCache())},h.domStart=function(){g(d.eventFragChain,d.eventFragBeforeDom,f,h)},h.domEnd=function(){g(d.eventFragChain,d.eventFragAfterDom,f,h)};var n=new e;h.rslt=function(b,c,d,e,g){var i=b instanceof a;if(e||g)f.addError("Error at "+h.toString()+": "+e+"- "+g,h,g,e,d);else if(i&&b.is("script")){if(d&&200!=d.status)f.addError(d.status+": "+e+' path siphon="'+h.frp.pathSiphon()+'"',h,g,e,d);else if(!d&&h.frp.pathSiphon()&&h.frs.resultSiphon()){var j=h.frp.pathSiphon().indexOf(L);j=j>-1?h.frp.pathSiphon().substr(L.length):h.frp.pathSiphon();var k=u(b,"type");a("<script"+("string"==typeof k&&k.length>0?' type="'+k+'">':">")+j+"</script>").appendTo(h.frs.resultSiphon())}}else h.fds.add(f.destScope,n,h.frs.add(n,c,b),c,h.isModel(d),e,d);h.domStart()},h.dest=function(){var a=null;try{a=n.appendReplaceAll(),a||f.addError("Nothing to add to the desitination(s)  for "+h.toString(),h,b)}catch(b){f.addError("Error while adding desitination results to the DOM  for "+h.toString(),h,b)}return h.domEnd(),a?(N(f,h,a,!1),h.destResults=C(h.destResults,a)):void 0},h.detachCache=function(){return n.detachCache()},h.nav=function(b){var c=null,e=null,i=null;if(d.eventIsBroadcast){if(f.len++,g(d.eventFragsChain,d.eventFragsBeforeHttp,f),f.cancelled)return;if(g(d.eventFragChain,d.eventFragBeforeHttp,f,h),h.cancelled)return;e=function(){h.domEnd()},i=function(a){a&&f.addError("Error while waiting for navigation window to complete loading",h,a),h.done(),f.done()}}b=b?b:h.navOpts;var j=null;if("get"!=h.method.toLowerCase()){var k=a('<form style="display:none;" action="'+h.frp.pathSiphon()+'" method="'+h.method+'" />');j=h.fps.params(null,!0);for(var l="",m=0;m<j.length;m++)l+='<input name="'+j[m].name+'" value="'+j[m].value+'" />';k.append(l),h.domStart(),c=b.getWin(k,d.readyStateDelay,d.readyStateTimeout,e,i)}else{var n=h.frp.pathSiphon(),j=h.fps.params();j&&(n+="?"+j),h.domStart(),c=b.getWin(n,d.readyStateDelay,d.readyStateTimeout,e,i)}return c},h.isModel=function(a){var b=a?a.getResponseHeader("Content-Type"):null;return b&&(b.indexOf("json")>=0||b.indexOf("xml")>=0)},h.isSimpleView=function(a){var b=a?a.getResponseHeader("Content-Type"):null;return b&&(b.indexOf("text/plain")>=0||b.indexOf("octet-stream")>=0)},h.isFullView=function(a){return!h.isModel(a)&&!h.isSimpleView(a)},h.getStack=function(){var a=[],b=h;do a[a.length]={pathSiphon:b.frp.pathSiphon(),resultSiphon:b.frs.getFuncOrResultSiphon(),destSiphon:b.fds.destSiphon(),destResults:b.destResults};while(b=b.pf);return a},h.adjustments=null,h.addAdjustments=function(a,b,c,d){var e={scope:a,oldValue:b,newValue:c,attrName:d};h.adjustments||(h.adjustments=[]),f.adjustments||(f.adjustments=[]),h.adjustments[h.adjustments.length]=e,f.adjustments[f.adjustments.length]=e},h.toString=function(){return v("object",h.constructor.name,"options",h.navOpts.toString(),"HTTP method",h.method,"URL",h.pseudoUrl(),"parameter siphon",h.fps.paramSiphon(),"path siphon",h.frp.pathSiphon(),"result siphon",h.frs.getFuncOrResultSiphon(),"destination siphon",h.fds.destSiphon(),"agent siphon",h.as,"cancelled",h.cancelled,"error",h.e?h.e.message:null)}}function F(b,c,e){return b.httpMethod=e?e.method:void 0,b.fragCount=c.cnt,b.fragCurrTotal=c.len,b.fragPendingPeerCount=e&&e.pf?e.pf.ccnt():0,b.fragWin=e?e.navOpts.getWin():void 0,b.fragIsAsync=e?e.navOpts.isAsync:void 0,b.fragType=e?e.navOpts.type():void 0,b.fragWinTarget=e?e.navOpts.target:void 0,b.fragWinOptions=e?e.navOpts.options:void 0,b.fragWinHistoryFlag=e?e.navOpts.history:void 0,b.fragStack=e?e.getStack():void 0,b.fragAdjustments=e?e.adjustments:void 0,b.action=c.action,b.parentOrigin=e?e.parentOrigin:void 0,b.sourceEvent=c.siphon.sourceEvent,b.eventSiphon=e?e.eventSiphon:void 0,b.paramsSiphon=e?e.fps.paramSiphon():void 0,b.parameters=e?e.fps.params():void 0,b.pathSiphon=e?e.frp.pathSiphon():void 0,b.resultSiphon=e?e.frs.getFuncOrResultSiphon():void 0,b.destSiphon=e?e.fds.destSiphon():void 0,b.agentSiphon=e?e.as:void 0,b.destResults=e?e.destResults instanceof a?e.destResults:e.el:void 0,b.error=e?e.e:void 0,b.actionScope=e?e.el:c.actionScope,b.searchScope=c.searchScope,b.destScope=c.destScope,b.chain=d.eventFragChain,b.variables=e?e.getVars():c.siphon?c.siphon.vars.get():void 0,b.log=function(a,b){w(a?a:"",b,this)},b.toFormattedString=function(){return v("event chain",b.chain,"fragCount",b.fragCount,"fragCurrTotal",b.fragCurrTotal,"action",b.action,"sourceEvent",b.sourceEvent,"parameters",b.parameters,"paramsSiphon",b.paramsSiphon,"pathSiphon",b.pathSiphon,"resultSiphon",b.resultSiphon,"destSiphon",b.destSiphon,"element",b.element,"actionScope",b.actionScope,"searchScope",b.searchScope,"destScope",b.destScope,"error",b.error)},b}function H(b,e,f,h,i,j,k){function l(a,b,c){b.cnt>b.len&&b.addError("Expected "+b.len+" fragments, but recieved "+b.cnt,c,null,null,null),c&&c.done(),b.done(function(){"function"==typeof k&&k(b.actionScope,b.cnt,b.getErrors()),mb&&(mb=!1,lb&&D())})}function m(a,b,c,d,e){if(a.frs.getFunc()&&a.frs.getFunc().isValid){var f=a.frs.getFunc().run({handle:{type:a.navOpts.type(),target:a.navOpts.target,data:c,status:d,xhr:e,fragSrc:F({},t,a),proceed:function(b){try{a.rslt(b),a.dest()}catch(c){t.addError("Error during handler proceed",a,c,d,e)}}}});return f.errorMessage&&t.addError(f.errorMessage,a,f.errorCause,d,e),b(a.el,a),!0}return!1}function n(b,c,e,f){function h(a,b,d,e){a.rslt(a.el,null,b,d,e),f(!b||d&&e?null:c,a)}var i=u(e,"src"),j=i&&i.length>0,k=j&&i.indexOf(L)>=0;t.len++;var l=new x(b,e,t),m=j?i:e.text();return m=m?m:e.html(),l.frp.pathSiphon(m),l.frs.resultSiphon(c,c),c.is(e)||e.remove(),g(d.eventFragChain,d.eventFragBeforeHttp,t,l),l.cancelled?void f(null,l):!j||k?void h(l):void a.getScript(i).done(function(a,b,c){h(l,c)}).fail(function(a,b,c){h(l,a,b,c)})}function o(b,c,e,f,g){if(!m(b,c,e,f,g)){if(b.isModel(g)||b.isSimpleView(g))return b.rslt(e,null,f,g,null),void c(null,b);var h="string"==typeof e;if(h){var i="<head ",j="</head>",k=e.indexOf(i);if(k>-1){var l=e.indexOf(j),o="<div "+e.substring(k+i.length,l)+"</div>";o=o.substring(0,o.indexOf(">")+1);var p=a(o+"</div>"),q=O(p,d.fragAttrs);if(q&&q==b.frs.resultSiphon(p)){o=o.replace(/div/g,"head"),o=e.substring(e.indexOf(o)+o.length,e.indexOf(j));var r=a("head");o=M(t,b,o);var s=new x(null,r,t),u=o.match(d.regexScriptTags);return u&&a.each(u,function(b,d){n(s,r,a(d),c),o=o.replace(d,"")}),s.rslt(o),s.dest(),void c(r,b)}}}var v=h?M(t,b,e):e,w=h?b.frs.parse(v):v,y=b.frs.each(w,null,g,function(d,e){var f=e.selectFrom(0!=d&&h?b.frs.parse(v):w);return f.length<=0?!0:void f.each(function(){var d=a(this),f=d.find("script");f.each(function(){n(b,d,a(this),c)}),d.is("script")?n(b,d,d,c):b.rslt(d,e,g)})});y&&y.length>0?c(y,b):(t.addError("No matching results for "+b.toString()+" in\n"+e,b,null,f,g),c(null,b))}}function p(b,c,e){function f(a,b,c){var d=t.getQueuedFrags(h);d.result=a,d.status=b,d.xhr=c;for(var f=0;f<d.frags.length;f++)o(d.frags[f],e,a,b,c)}var h=null;try{if(h=new x(b,c,t),e="function"==typeof e?e:function(){},g(d.eventFragChain,d.eventFragBeforeHttp,t,h),h.cancelled)return void e(null,h);if(h.frp.pathSiphon()==d.selfRef)return void o(h,e,a("html"),d.selfRef,null);if(t.queueFrag(h))a.ajax({url:h.frp.pathSiphon(),type:h.method,data:h.fps.params(),async:h.ajaxAsync,cache:d.ajaxCache,crossDomain:d.ajaxCrossDomain}).done(f).fail(function(a,b,c){for(var d=t.getQueuedFrags(h),f=0;f<d.frags.length;f++)t.addError("Error at "+d.frags[f].toString()+": "+b+"- "+c,d.frags[f],c,b,a),m(d.frags[f],e,null,b,a)||e(null,d.frags[f])});else{var i=t.getQueuedFrags(h);if(i.result)return void o(h,e,i.result,i.status,i.xhr)}}catch(j){t.addError("Error at "+(h?h.toString():x)+": "+j,h,j,null,null),e(null,h)}}function q(b,c){p(b,c,function(c,d){if(c){var e=!1;if(t.siphon.selector instanceof a){var f=new P(wb);c=f.selectFrom(c),t.resetSiphon(wb,c,null,null,!1),e=!0}s(c,d,e)}l(b,t,d)})}function s(b,c,d){var e=d||t.isShortHand&&b.is(t.actionScope)?b:b.find(t.siphon.selector);t.len+=e.length,e.each(function(){q(c,a(this))}),(t.cnt>0||0==e.length&&0==t.cnt)&&l(null,t,c)}var t=new r(b,e,f,h,i,j);if(g(d.eventFragsChain,d.eventFragsBeforeHttp,t),!t.cancelled){if(t.isTopLevel){var v=a("head");if(v&&v.length>0){var w=O(v,d.includeAttrs);w||(w=O(v,d.replaceAttrs)),w||(t.len++,q(null,c))}}s(t.actionScope,null)}}function I(b,e,f,g,i,j){if(f.type===Z){if(j){if(!c.is(j)){var k=u(j,f.items[g].name);ov=u(j,k),l=qb(k,b.ctxPath),u(j,k,l),e.addAdjustments(j,ov,l,f.items[g].name)}return""}var k=f.items[g].name,l=qb(i,b.ctxPath);return e.addAdjustments(j||e.el,i,l,f.items[g].name)," "+k+'="'+l+'"'}var m=t(i,d.multiSep),n=[];return a.each(m,function(c,i){if("load"!=i.toLowerCase()){var k=new X(f.method,i,d.actionNavInvoke,null,null,b.siphon.vars,!1,b.searchScope);if(k.isValid){k.eventAttrs=f.items,k.typeSiphon=f.type;var l=h(sb,k.action,k.method,e.pel,j,k.eventSiphon,k.delegateSiphon,function(c,d,e){var f=a(d);return k.captureAttrs(f,b.siphon.vars,!1,!0)?(k.sourceEvent=e,k.selector=d,k.searchScope=b.searchScope,k.destScope=b.destScope,sb.exec(k,c),!1):!0});k.onEvent=l.eventAttrValue,k.eventSiphon=l.eventName,e.addAdjustments(j||e.el,null,k.eventSiphon,f.items[g].name),n[n.length]=k}else b.addError('Expected an event for action "'+d.actionNavInvoke+'" and method "'+k.method+'"',e,null,null,null)}}),n}function J(b,c,d,e){var f="";if(e="string"==typeof e?e:a(e),"string"==typeof e)for(var g=0;g<d.items.length;g++)e=e.replace(d.items[g].regExp,function(a,e){return f=I(b,c,d,g,e,null),"string"==typeof f?f:f.isValid?f.onEvent:e});else{var h="",i=new P(d.sel),j=i.selectFrom(e);if(!j||j.length<=0)return e;j.each(function(){for(var e=a(this),g=0;g<d.items.length;g++)h=u(e,d.items[g].name),h&&(f=I(b,c,d,g,h,e))})}return e}function M(a,b,c){return lb&&(c=J(a,b,xb,c)),c}function N(a,b,c,d){d&&lb&&J(a,b,xb,c),J(a,b,yb,c),J(a,b,zb,c),J(a,b,Ab,c),J(a,b,Bb,c)}function O(a,b){function c(c){for(var d=void 0,e=void 0,f=0;f<b.length;f++)if(e=b[f].replace("\\",""),c){if(c==e)return e}else if(d=u(a,e),"undefined"!=typeof d)return d;return null}if(u(a,"id")!=G)return c(null);var e=u(a,d.fragHeadAttr);if(e){var f=e.split("=");if(2==f.length)return c(f[0])?f[1]:null;throw new Error(G+" has invalid atrtribute "+d.fragHeadAttr+'="'+e+'" for '+attr)}}function P(b,c,d,e){var f=this;if(f.selector=b instanceof a?b:b?a.trim(b):null,f.directive=c?a.trim(c):"",f.directive){var g=f.directive.toLowerCase();(g==V||g==W)&&(f.directive=g)}f.selectFrom=function(c,d){var e=null;if(b&&f.selector){var g=c?c:a("html"),h=null,i=f.selector instanceof a;if(i&&f.selector.is(g))return g;if(i&&f.selector.is(Q))return g.contents();e=g.find(f.selector),e.length<=0&&(i&&d&&(h=A(f.selector),e=g.find(h)),e.length<=0&&(e=g.filter(f.selector),h&&e.length<=0&&(e=g.filter(h))))}else e=a();return e},this.child=d,this.type=function(){return e},this.toString=function(){return v("selector",this.selector,"directive",this.directive)}}function R(b,c){function e(b,c,d){if(!b)return null;var e=null,f=c?new P(c[0],c.length>1?c[1]:"",d):null;return e=b instanceof a||"string"==typeof b?new P(b,f,d):new P(b[0],b.length>1?b[1]:"",f,d),g[g.length]=e}function f(a){function b(a,b){var c=b.split(d.regexParentChildDelimiter),f=c.length>1?c[1]:null,g=c.length>2?c[2]:null;return f&&db.indexOf(f.toLowerCase())>=0?(g=f,f=null):f&&(f=f.split(d.regexDirectiveDelimiter)),e(c[0].split(d.regexDirectiveDelimiter),f,g),""}return o(a,d.regexNodeSiphon,b)}var g=[];this.siphon=b,this.each=function(b){return"function"==typeof b?a.each(g,b):void 0},this.size=function(){return g.length},b instanceof a?e(b):(e(f(b)),c&&b&&d.regexFragName.test(b)&&e(z(c,b,null)))}function X(a,b,c,e,f,g,h,i,j){var k=this;k.selector=e?e:"",k.method=a?a:d.ajaxTypeDefault,k.eventSiphon=b,k.matchAttr=j,k.matchVal="",k.paramsSiphon="",k.pathSiphon="",k.resultSiphon="",k.destSiphon="",k.typeSiphon="",k.targetSiphon="",k.agentSiphon="",k.delegateSiphon="",k.withSiphon="",k.funcName="",k.sourceEvent=null,k.isValid=j||b,k.captureAttrs=function(a,b,c,d){if(k.isValid&&a){try{k.isValid=$(a,k.method,k.eventSiphon,k,S,b,c,i,d)}catch(e){w("Unable to capture siphons",e,k),k.isValid=!1}return k.isValid}return!1},k.isValid&&(c&&(k.selector="",k.action=c,k.onEvent=""),f&&k.captureAttrs(f,g,h,!0))}function Y(a,b,c,e,f,g){function h(a){return new P(a).selectFrom(g)}function i(a,i){return q(i,d.regexDirectiveDelimiter,e,f,h,function(a,d,e,f){if(f){var h=new X(b,e,null,null,a,c,!1,g,f);return c.rep(b,h.matchVal)}})}return o(a,d.regexSurrogateSiphon,i,b,c)}function $(b,c,e,f,g,h,i,j,k){function l(){this.run=!0,this.attr=null,this.val=null,this.el=null}function m(a,b){var c=b.charAt(0).toUpperCase()+b.substr(1).toLowerCase();return c=a+(a==b?"":c)+"Attrs"}function n(b,c){if(!e)return-2;var f=p(b,m(c,c),d);return f=f&&f.val?t(f.val,d.multiSep):null,f?a.inArray(e,f):-1}function o(a,b,c){var e=p(a,b,d);if(e&&e.val&&-2!=c){var f=t(e.val,d.multiSep);f=f&&c>=f.length?f[f.length-1]:f?f[c]:void 0,e.val=f}return e}function q(a,b,c){return void 0!==b[a]&&(c||null==b[a]||b[a].length<=0)}function r(a,b){return(a==b?"event":b)+"Siphon"}function s(b,c,f,g,i,k,l,n){if(q(k,g,i)){var p=o(b,l,f);g.matchAttr&&p&&g.matchAttr==p.attr&&(g.matchVal=p.val),p&&p.val?g[k]=p.val:(n.run&&(n.run=!1,n.attr=r(c,T),n.val=o(b,m(c,T),f),n.val&&(n.val=Y(n.val.val,c,h,d.agentSelSep,null,j)),q(n.attr,g,i)&&(g[n.attr]=n.val),n.val&&(n.el=a(n.val),n.val=new X(c,e,null,n.el.selector,null,h,!1,j,g.matchAttr),n.el.each(function(){v(n.el,c,n.val,!1,!1,!1)||(n.val=null)}))),n.val&&"object"==typeof n.val&&n.val[k]?(g[k]=n.val[k],h.add(this.method,this.ws),g.matchVal||(g.matchVal=n.val.matchVal),g.withSiphon||(g.withSiphon=n.val.withSiphon)):g[k]=p?p.val:null)}}function u(a,b,c,d,e){for(var f=null,i=null,j=new l,k=0;k<g.length;k++)i=g[k].toLowerCase(),f=m(b,i),i=r(b,i),s(a,b,c,d,e,i,f,j);return h&&d.withSiphon&&h.add(b,d.withSiphon),d}function v(b,c,d,e,f,g){c=c.toLowerCase();var h=n(b,c);if(0>h&&h>-2)if(f){if(a.each(U,function(){var a=this.toLowerCase();return a!=c&&(h=n(b,a),h>=0)?(c=a,!1):void 0}),0>h){if(e)return!1;h=0}}else{if(e)return!1;h=0}return u(b,c,h,d,g),!0}return b&&c&&f&&a.isArray(g)?v(b,c,f,!0,i,k):!1}function _(a,b,e,f){var g=null;this.pathSiphon=function(h){try{return e=h?h:e,(!g||h)&&(g=Y(e,b.method,f,d.pathSep,null,a.searchScope),g&&g.length>0&&g.toLowerCase()!=d.selfRef.toLowerCase()&&!K.test(g)?g=pb(a.ctxPath,g,c?u(c,d.fragExtensionAttr):""):b.frs.resultSiphon()&&(g=d.selfRef)),g}catch(i){a.addError("Failed to capture path siphon on "+(h?h:g?g:e),null,i)}}}function gb(b,c,e,f){function g(a,b){return e=b?b:e,e&&!l||b||!a&&"object"==typeof l||a&&"string"==typeof l?e:null}function h(b,c,e){var f=encodeURIComponent(e.replace(d.regexParamReplace,d.paramReplaceWith)),g="string"==typeof c?c:c.val;if("string"==typeof b)return b+(b.length>0?d.paramSep:"")+g+"="+f;var h={};return h[g]=f,a.extend(b,h),b}function i(b,c,e){if(nb(c))return e;var f=p(c,null,d.paramNameAttrs,!0);if(!f||!f.val)return e;var g=b.directive?b.directive==V?c.text():b.directive==W?c.html():u(c,b.directive):c.val();return void 0!==g&&null!==g&&(a.isArray(g)?a.each(g,function(a,b){e=h(e,f,b)}):e=h(e,f,g)),e}function j(a,e){var h=g(a,e);return h&&(l=Y(h,c.method,f,d.paramSep,null,b.searchScope),k=new R(l)),h}var k=null,l=null,m=null,n=null;this.paramSiphon=function(a,c){try{return j(a,c),l}catch(d){b.addError("Failed to capture parameter siphon on "+(c?c:e),null,d)}},this.params=function(c,d,f){try{var g=c instanceof a?c:n?n:b.searchScope?b.searchScope:a("html");if(j(d,f)||l&&(!n||!n.is(g))){n=g;var h=d?{}:"";k.each(function(b,c){var d=c.selectFrom(n);d.each(function(){h=i(c,a(this),h)})}),m=h}return m}catch(o){b.addError("Failed to capture parameters for element "+c+" on "+(f?f:e),null,o)}}}function hb(b,c,e,f){e="string"==typeof e?a.trim(e):e?e:null;var g=null,h=null,i=null,j=null;this.getFunc=function(){return i},this.resultSiphon=function(k,l){try{if(g=l?l:g,!g||l||k&&k.nodeType&&!k.is(j)){var m=k instanceof a;g=Y(g?g:m?k:e,c.method,f,d.resultSep,null,k||b.searchScope),!g&&m&&(g=k),i=new s(d,g,null,!0),h=new R(i&&i.isValid?"":g?g:m?k:"",d.fragAttrs),j=k}return g}catch(n){b.addError("Failed to capture result siphon on "+l,null,n)}},this.add=function(b,e,f){var g=f instanceof a,h=null;return h=e&&e.directive&&e.directive!=V&&e.directive!=W?g?u(f,e.directive):null:g&&e&&e.directive==V?ob(f):f?f:"","string"!=typeof h||d.regexTags.test(h)?!h||h instanceof a||(h=a(h)):h=a(document.createTextNode(h)),h&&b.rsltCache(c.navOpts.type()!==bb,h,e&&e.child),h},this.each=function(a,b,d,e){return this.resultSiphon(a,b),h&&h.size()>0?(h.each(e),c.dest()):null},this.parse=function(b){var c=d.resultWrapperTagName||Q;return a("<"+c+">"+b+"</"+c+">")},this.result=function(b){return a(b).add(this.parse(""))},this.getFuncOrResultSiphon=function(){return i&&i.isValid?i.getFuncString():this.resultSiphon()}}function ib(b,c,e,f){function g(a){return a&&a.directive&&a.directive!=V&&a.directive!=W}function h(b,c,d,e,f,h,i,j,k){if(e)return h;if(d){var l=0;if(g(f))u(h,f.directive,"");else if(!i||f.directive&&f.directive!=W)l=1;else{var m=i.selectFrom(h,!0);m.length>0?m.remove():l=1}1==l&&h.contents().filter(function(){return 3===this.nodeType}).remove()}var n=null;!j&&i&&i.directive&&i.directive!=V&&i.directive!=W?n=function(a){return u(a,i.directive)}:g(f)?n=function(a,b){var e=c&&!d?u(a,f.directive):null;u(a,f.directive,(e?e:"")+ob(b))}:j instanceof a&&f.directive==V?n=function(a,b){return ob(b)}:k instanceof a&&(n=function(){return k}),(j||n)&&b.destCache(c,h,n,i&&i.child?j:null)}function i(a,b,c,d,e,f,g,i){return h(a,!0,b,c,d,e,f,g,i)}function j(a,b,c,d,e,f,g,i){return h(a,!1,b,c,d,e,f,g,i)}e="string"==typeof e?a.trim(e):e?e:null;var k=null,l=null;this.destSiphon=function(g){return k=g?g:k,(!k||g)&&(k=Y(k||e,c.method,f,d.destSep,null,b.destScope),l=new R(k?k:e instanceof a?e:"",d.fragAttrs)),k},this.destResolver=function(a){return this.destSiphon(a),l},this.add=function(d,e,f,g,h,k,l){function m(m,o){try{var p=null,q=o.selectFrom(d);if(q.length<=0)return!0;if(n===bb)try{p=a(f),j(e,!1,h,o,q,g,p)}catch(r){p=q.parent(),j(e,!1,h,o,q,g,f,p)}else{if(n!==ab&&n!==cb){var s='Invalid destination type "'+n+'" for '+c.toString();return b.addError(s,c,null,k,l),!1}c.fds.destSiphon()||n===cb?c.fds.destSiphon()?i(e,n===cb,h,o,q,g,f):i(e,n===cb,h,o,q,g,f):i(e,!1,h,o,q,g,f)}}catch(r){b.addError('Error while processing desitination "'+o+'" for '+c.toString(),c,r,k,l)}}var n=c.navOpts.type();g&&g.child?(n=g.type()?g.type():n,m(-1,g.child)):this.destResolver().each(m)}}function jb(a){var b=kb(a);return b&&(b=b.split("."),b=b.length>1?"."+b[b.length-1]:""),b}function kb(a){var b="";if(a){var c=a.match(d.regexFileName);c&&c.length>0&&(b=c[0])}return b}function nb(a){return a.is(":disabled")||!a.is(":checked")&&"input"==u(a,"nodeName").toLowerCase()&&d.regexParamCheckable.test(u(a,"type"))}function ob(b,c){var e="",f=null,g=null;return b instanceof a&&b.each(function(b,h){f=a(h),g=f.is(":input")&&!f.is(":button")?nb(f)?"":f.val():f.text().replace(d.regexDestTextOrAttrVal,""),e+=(e&&c?c:"")+(g?g:"")}),e}function pb(a,b,c){if(c=c&&b.lastIndexOf(d.pathSep)!=b.length-1?c.toLowerCase()==d.inheritRef?jb(location.href):jb(b)?"":c:""){var e=b.indexOf("?");e>=0?b=b.substring(0,e)+c+b.substring(e):b+=c}return b=qb(b,a)}function qb(a,b){return k(a,b,d.regexAbsPath,d.pathSep,rb)}function rb(a){return d.regexIanaProtocol.test(a)?E(a,ub):null}var sb=this;sb.opts=d;var tb=d.includeAttrs.concat(d.replaceAttrs),ub=d.regexFileTransForProtocolRelative.test(location.protocol)?"http:":null,vb=d.getAttrs.concat(d.postAttrs.concat(d.putAttrs.concat(d.deleteAttrs))),wb=z(tb,null,null);wb=(wb?wb+",":"")+z(vb,"load","*");var xb=y(d.urlAttrs,"GET",Z,d.regexAttrRelUrlSuffix),yb=y(d.getAttrs,"GET",eb,d.regexAttrAnyUrlSuffix),zb=y(d.postAttrs,"POST",eb,d.regexAttrAnyUrlSuffix),Ab=y(d.putAttrs,"PUT",eb,d.regexAttrAnyUrlSuffix),Bb=y(d.deleteAttrs,"DELETE",eb,d.regexAttrAnyUrlSuffix);
sb.exec=function(b,c){function e(a,b){f(a,"selector",b),f(a,"searchScope"),f(a,"destScope")}function f(b,c,d){b[c]=b[c]?b[c]instanceof a&&b[c].length>0?b[c]:a(b[c]):a(d),b[c].length<=0&&(b[c]=null)}b="object"==typeof b?b:{action:b};var g=fb[b.action];if(g&&"function"==typeof g.f)g.f(c);else if(b.action===d.actionLoadFrags)b.selector=c,e(b,c),H(b.action,b.selector,b.searchScope,b.destScope,wb,null,null);else if(b.action===d.actionNavInvoke){if(!b.pathSiphon)return void w("No path specified for "+b.action,1);b.method=b.method?b.method:d.ajaxTypeDefault;var h=new j(b.typeSiphon,d.typeSep,b.targetSiphon,d.targetSep);if(h.isFullPageSync()){e(b,c);var i=new r(b.action,b.selector,b.searchScope,b.destScope,b),k=new x(null,i.actionScope,i);k.nav(h)}else e(b,c),H(b.action,b.selector,b.searchScope,b.destScope,b,h,null)}else{if(b.action!==d.actionNavRegister){if(b.action===d.actionOptions)return d;throw new Error("Invalid action: "+b.action)}e(b,c);var i=new r(b.action,b.selector,b.searchScope,b.destScope,{}),k=new x(null,i.actionScope,i);N(i,k,i.actionScope,!0)}}}function s(b,c,d,e){function f(a){var b="";if(a)for(var c in a)b+=c+"="+a[c]+",";return b.length>1?"["+b.substring(0,b.length-2)+"]":""}try{var g=e||"function"!=typeof window[c]?void 0:window[i],h=null;if(this.isValid="function"==typeof g,this.setArgs=function(c){if(this.isValid)if(a.isArray(h)&&h.length>0)for(var d=c&&a.isArray(c),e=0;e<h.length;e++)h[e]=h[e].replace(b.regexFuncArgReplace,""),"event"!=h[e]||d?d&&c[h[e]]&&(h[e]=c[h[e]]):h[e]=c;else"object"==typeof c&&(h=c)},!g){var i=b.regexFunc.exec(c);i&&(i=i[0],i&&(h=c.substring(i.length,c.lastIndexOf(")"))),i=c.split("(")[0],"function"==typeof window[i]&&(g=window[i],this.isValid=!0,h&&h.length>0?(h=h.match(b.regexFuncArgs),this.setArgs(d)):d&&this.setArgs(d)))}this.run=function(b,e){var i={result:"",errorMessage:"",errorCause:""};if(this.isValid)try{e&&h&&this.setArgs(e),i.result=a.isArray(h)&&h.length>0?g.apply(b,h):h?g.call(b,h):g.call(b)}catch(j){i.errorMessage="Error while calling "+c+" "+f(d)+": "+j,i.errorCause=j}return i},this.getFuncString=function(){return this.isValid?g.toString():""}}catch(j){w("Error in "+c+" "+f(d),j)}}function t(b,c){return a.map(b.split(c),a.trim)}function u(b,c,d){var e="";if(b&&c){if("undefined"!=typeof d)return b.prop(c,d),b;e=b.prop(c),("undefined"==typeof e||e instanceof a)&&(e=b.attr(c))}return e}function v(){for(var a="[",b="",c=0;c<arguments.length;c++)b?(a+=arguments[c]?b+arguments[c]:"",b=""):b=(a.length>1?", ":"")+arguments[c]+": ";return a+"]"}function w(a,b,c){function d(a,b){if(b){var c=[];for(var d in b)this[d]&&"function"!=typeof this[d]&&b.hasOwnPropery(d)&&(c.push(d),c.push(this[d]));return a+(c.length>0?"\nFor:\n"+v.apply(b,c):"")}return a}try{if(a=a?a:"",a=0>=ib||ib>jb?a:"function"==typeof a.toFormattedString?a.toFormattedString():d(a,c),"undefined"!=typeof window.console&&"undefined"!=typeof window.console.log){var e=b instanceof Error;(e||1==b)&&window.console.error?a&&window.console.error(a+(e?" Cause: "+b.message:"")):2==b&&window.console.warn?a&&window.console.warn(a):a&&window.console.log(a),c&&window.console.log(c)}}catch(f){}}function x(a,b,c,d){var e=0,f=null;f=setInterval(function(){try{var a=null;e>=b?(clearInterval(f),d(e,new Error("Timmed out after "+e*b+" milliseconds"))):"function"==typeof c&&(a=c())?("loaded"==a.document.readyState||"complete"==a.document.readyState)&&(d(e),clearInterval(f)):d(e)&&clearInterval(f),e++}catch(g){clearInterval(f),d(e,g)}},a)}function y(b,c,d,e){for(var f={items:[],sel:"",method:c,type:d},g="",h=a.isArray(b)?b:b&&"string"==typeof b?b.split(","):[],i=0;i<h.length;i++)g="["+h[i]+"]",f.items.push({name:h[i],sel:g,regExp:new RegExp("\\s"+h[i]+e,"ig")}),f.sel+=f.sel.length>0?","+g:g;return f}function z(b,c,d,e){for(var f="",g=a.isArray(b)?b:[b],h=0;h<g.length;h++)f+=(h>0?",":"")+(e?e:"")+"["+g[h]+(c?(d?d:"")+'="'+c+'"':"")+"]";return f}function A(b){var c="",d=u(b,"tagName");return a.each(b,function(){var a=this.attributes;for(var b in a)a[b].nodeName&&void 0!==a[b].nodeValue&&(c+=(c.length>0?",":"")+d+"["+a[b].nodeName+'="'+a[b].nodeValue+'"]')}),c?c:d}function B(a){if(!a)return!1;var b=u(a,"tagName");return b=b?b.toLowerCase():null,"html"===b||"head"===b}function C(b,c){return b instanceof a?c?b.add(c):b:c?a(b).add(c):a(b)}function D(){var a=location.href.lastIndexOf("#");a>=0&&(location.href=location.href.substring(a))}function E(a,b){return b&&0==a.indexOf("//")?protocolForFile+a:a}function F(){function b(b,c,d){if(b&&a('<link type="text/css" href="'+b+'" rel="stylesheet" />').appendTo("head"),c){var e=m(c,I,H);a.getScript(e).done(function(a,b,c){d(e,a,b,c,null)}).fail(function(a,b,c){d(e,null,b,a,c)})}else d(null,null,null,null)}if(void 0===a.fn[G]){var c=a("#"+G);if(!c.length)throw new Error("No script found with ID: "+G);lb=!0,kb=c.attr(N);var d=a("base"),e=d.attr("href"),f=e&&kb&&e.toLowerCase()!=kb.toLowerCase(),g=ib>0&&jb>=ib;if(f?w('Found base href="'+e+'" while '+G+" "+N+'="'+kb+'". Relative URLs will be updated via JQuery and may not reflect the base tag href',2):kb||g||(lb=!1,kb=e),!kb)throw lb=!1,new Error("Unable to capture "+N);var h={selfRef:"this",ajaxCache:!1,ajaxCrossDomain:!1,ajaxTypeDefault:"GET",inheritRef:"inherit",pathSep:H,paramSep:"&",agentSelSep:",",resultSep:",",destSep:",",typeSep:"|",targetSep:"|",multiSep:"::",fragAttrs:["data-thx-fragment","th\\:fragment","data-th-fragment"],includeAttrs:["data-thx-include","th\\:include","data-th-include"],replaceAttrs:["data-thx-replace","th\\:replace","data-th-replace"],urlAttrs:["action","archive","background","cite","classid","codebase","data","dynsrc","formaction","href","icon","longdesc","lowsrc","manifest","poster","profile","src","usemap"],getAttrs:["data-thx-get"],postAttrs:["data-thx-post"],putAttrs:["data-thx-put"],deleteAttrs:["data-thx-delete"],getPathAttrs:["data-thx-get-path"],postPathAttrs:["data-thx-post-path"],putPathAttrs:["data-thx-put-path"],deletePathAttrs:["data-thx-delete-path"],getParamsAttrs:["data-thx-get-params"],postParamsAttrs:["data-thx-post-params"],putParamsAttrs:["data-thx-put-params"],deleteParamsAttrs:["data-thx-delete-params"],getResultAttrs:["data-thx-get-result"],postResultAttrs:["data-thx-post-result"],putResultAttrs:["data-thx-put-result"],deleteResultAttrs:["data-thx-delete-result"],getDestAttrs:["data-thx-get-dest"],postDestAttrs:["data-thx-post-dest"],putDestAttrs:["data-thx-put-dest"],deleteDestAttrs:["data-thx-delete-dest"],getTypeAttrs:["data-thx-get-type"],postTypeAttrs:["data-thx-post-type"],putTypeAttrs:["data-thx-put-type"],deleteTypeAttrs:["data-thx-delete-type"],getTargetAttrs:["data-thx-get-target"],postTargetAttrs:["data-thx-post-target"],putTargetAttrs:["data-thx-put-target"],deleteTargetAttrs:["data-thx-delete-target"],getAgentAttrs:["data-thx-get-agent"],postAgentAttrs:["data-thx-post-agent"],putAgentAttrs:["data-thx-put-agent"],deleteAgentAttrs:["data-thx-delete-agent"],getDelegateAttrs:["data-thx-get-delegate"],postDelegateAttrs:["data-thx-post-delegate"],putDelegateAttrs:["data-thx-put-delegate"],deleteDelegateAttrs:["data-thx-delete-delegate"],getWithAttrs:["data-thx-get-with"],postWithAttrs:["data-thx-post-with"],putWithAttrs:["data-thx-put-with"],deleteWithAttrs:["data-thx-delete-with"],fragExtensionAttr:"data-thx-frag-extension",fragListenerAttr:"data-thx-onfrag",fragsListenerAttr:"data-thx-onfrags",fragHeadAttr:"data-thx-head-frag",paramNameAttrs:["name","id"],readyStateDelay:10,readyStateTimeout:3e4,regexFragName:/^[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/,regexFunc:/^[_$a-zA-Z\xA0-\uFFFF].+?\(/i,regexFileName:/[^\/?#]+(?=$|[?#])/,regexTags:/<[a-z]+[^>]*>(?:[\S\s]*?)<\/(?:[\S\s]*?)[a-z]+>/i,regexScriptTags:/<script[^>]*>([\\S\\s]*?)<\/script>/gim,regexAttrRelUrlSuffix:"s*=s*[\"|\\'](?!(?:[a-z]+:)|/|#)(.*?)[\"|\\']",regexAttrAnyUrlSuffix:"s*=s*[\\\"|'](.*?)[\\\"|']",regexIanaProtocol:/^(([a-z]+)?:|\/|#)/i,regexFileTransForProtocolRelative:/^(file:?)/i,regexAbsPath:I,regexFuncArgs:/(('|").*?('|")|[^('|"),\s]+)(?=\s*,|\s*$)/g,regexFuncArgReplace:/['"]/g,regexDirectiveDelimiter:/->/g,regexParentChildDelimiter:/=>/g,regexSurrogateSiphon:/\?([^\?"']+?(?:(?:"|')[^"']*(?:"|')[^\?{}"']*)*)}/g,regexNodeSiphon:/\|([^\|"']+?(?:(?:"|')[^"']*(?:"|')[^\|{}"']*)*)}/g,regexVarSiphon:/\$([^\$"']+?(?:(?:"|')[^"']*(?:"|')[^\${}"']*)*)}/g,regexVarNameVal:/((?:\\.|[^=,]+)*)=("(?:\\.|[^"\\]+)*"|(?:\\.|[^,"\\]+)*)/g,regexParamCheckable:/^(?:checkbox|radio)$/i,regexParamReplace:/\r?\n/g,regexDestTextOrAttrVal:/[^\x21-\x7E\s]+/g,regexFilterFindSplit:/\s+/,paramReplaceWith:"\r\n",resultWrapperTagName:Q,eventIsBroadcast:!0,eventFragChain:"frag",eventFragsChain:"frags",eventFragBeforeHttp:"beforehttp.thx.frag",eventFragBeforeDom:"beforedom.thx.frag",eventFragAfterDom:"afterdom.thx.frag",eventFragLoad:"load.thx.frag",eventFragsBeforeHttp:"beforehttp.thx.frags",eventFragsLoad:"load.thx.frags",actionLoadFrags:"frags.load",actionNavRegister:"nav.register",actionNavInvoke:"nav.invoke",actionOptions:"opts.get"};a.fn[G]=function(b,d){var e=a.extend({},h,d),f=null,g=null,i=this.selector;return this.each(function(){mb&&nb&&a.contains(document,this[0])&&(nb=!1,a("html")[G](e.actionNavRegister)),g=a.data(this,G),(d||!g)&&(g=f?f:f=new r(i,c,e),a.data(this,G,g)),g.exec(b,this)})},a.fn[G].defaults=h;try{ib=(ib=(navigator.userAgent||"").match(/(?:(?:MSIE\s*)|(?:Trident.*rv:))(\d+\.?\d*)/i))&&ib.length>1?parseFloat(ib[1],10):0}catch(i){w("Unable to detect IE version: ",i)}try{hb=navigator.platform.toLowerCase().indexOf("linux")>=0}catch(i){w("Unable to detect Linux: ",i)}b(u(c,O),u(c,P),function(b,d,e,f,g){if(g){var i='Unable to load "'+b+'" '+g+", status: "+e+", data: "+d;throw w(i,1),new Error(i)}var j=a("html");c.attr(M)||j[G](h.actionLoadFrags)})}}var G=displayName="thymus",H="/",I=/([^:]\/|\\)(?:\/|\\)+/,J=/\?|#/,K=/<!\[CDATA\[(?:.|\r\n|\n|\r)*?\]\]>/gi,L="data:text/javascript,",M="data-thx-deferred-load",N="data-thx-base-path",O="data-thx-preload-css",P="data-thx-preload-js",Q=G+"-results",R="with",S=["type","params","path","result","dest","target","delegate",R],T="agent",U=["GET","POST","DELETE","PUT"],V="text",W="html",X="async",Y="sync",Z="urlattr",$="transfer",_="attribute",ab="include",bb="replace",cb="update",db=[Z,_,ab,bb,cb],eb=ab,fb={},gb=0,hb=!1,ib=0,jb=9,kb=null,lb=!1,mb=!0,nb=!0;if("undefined"==typeof a)throw new Error("jQuery is required for "+G);a(document).ready(F)}(window.jQuery);